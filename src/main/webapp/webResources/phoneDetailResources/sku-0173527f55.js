!function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var i={};return t.m=e,t.c=i,t.p="//store.res.meizu.com/detail/",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var i=t.slice(1),n=e[t[0]];return function(e,t,a){n.apply(this,[e,t,a].concat(i))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,i){i(74);var n=i(13);i(14),i(72),i(75),i(64),i(65),i(66);var a=i(77),s=i(67),o=i(68),r=i(69);n(function(){var e={imgBooth:n("#J_imgBooth"),detailFastTab:n("#detailFast li")};r(),n("#detail").vtab({navSelector:".detail-tab ul",contSelector:".detail-content",afterActive:function(t,i,a){var s=t.parents(".detail-tab");(s.hasClass("fixed")||"gotop"===a)&&n("html,body").animate({scrollTop:n("#detail").offset().top},150),e.detailFastTab.eq(i).addClass("current").siblings().removeClass("current")}}),e.detailFastTab.on("click",function(e){var t=n(this),i=t.index();n("#detail .detail-tab li").eq(i).trigger("click",["gotop"]),t.addClass("current").siblings().removeClass("current"),e.preventDefault()}),n("#J_btnBuyShortcut").on("click",function(){n("#J_btnBuy").trigger("click")}),n("#J_previewThumb").on("click","li",function(t){t.preventDefault();var i=n(this),a=i.find("img").attr("src"),s="680x680",o=a.replace(/([\@]?)120x120(\.[\w]+)$/,"$1"+s+"$2");i.hasClass("current")||(i.addClass("current").siblings().removeClass("current"),e.imgBooth.find("img").attr("src",o).hide().fadeIn())}),n("#introduce .lazy").lazyload({threshold:300}),n("#J_btnBuyShortcut").on("click",function(){n("html,body").animate({scrollTop:n("#property").offset().top},200)}),new s({speed:600,smartHeight:500}),a.init(),o.check()})},,,,,,,,,,,,,function(e,t){e.exports=meizuStoreGlobal.jquery},function(e,t,i){i(15);var n=i(13),a=i(23),s=i(24).login,o=i(25);i(26);var r=window.dialog,c=i(27),d=i(28),l=i(30),u=i(31),p=i(32),m=i(33),h=i(36),f=i(37),v=i(38),g=i(39),y=i(40),b=i(51),k=i(54),w=i(55),_=i(56),x=window.MZ,S=x.modelData;n.fn.extend({lockButton:function(e){var t=n(this);e=e||3e3,t.addClass("locked").prop("disabled",!0),window.setTimeout(function(){t.removeClass("locked").prop("disabled",!1)},e)}});var C,T,I,P,A,M;M={price:n("#J_price"),totalPriceShortcut:n("#J_totalPriceShortcut"),btnBuy:n("#J_btnBuy"),packageTab:n("#J_packageTab"),packageContent:n("#J_packageContent"),packageBody:n("#J_packageBody"),summaryMain:n("#J_summaryMain"),imgBooth:n("#J_imgBooth"),previewThumb:n("#J_previewThumb"),propertyPackage:n("#propertyPackage"),quantity:n("#J_quantity"),sumaryPackageItemNames:n("#J_sumaryPackageItemNames"),message:n("#J_message"),serverTime:n("#servertime"),panicBuyingWrap:n("#J_panicBuyingWrap"),summaryName:n("#J_summaryName"),activity:n("#J_activity"),discountTag:n("#J_discountTag"),originalPrice:n("#J_originalPrice"),activityCon:n("#J_propertySellDiscount"),discountCountDown:n("#J_discountCountDown"),huabeiBd:n("#J_huabeiBody"),propertySellAppPrice:n("#J_propertySellAppPrice"),appPrice:n("#J_appPrice"),appPriceTip:n("#J_appTip")},I=o.Model.extend({defaults:{buyButton:"",images:null,names:"",packageIds:null,price:"",priceCent:0,pvs:"",skuId:0,stock:0,type:1,shelveTime:0,activeStatus:0,isSupportCart:!1}}),P=o.Collection.extend({model:I}),C=o.Model.extend({defaults:{buyButton:"",images:null,names:"",packageIds:null,price:"",priceCent:0,pvs:"",skuId:"",stock:"",attributes:"",propItem:null,propSet:null,total:0,quantity:1,activePackage:"",packageSet:null,packageSkuIds:null,packageTotalPriceCent:0,packageTotalProfitsCent:0,packageMap:null,packageItems:null,initSelectedPackage:!0,costPriceCent:0,hasGiftCard:!1,isPanicBuying:!1,panicToken:"",type:1,shelveTime:0,activeStatus:1,isSupportCart:!1,periods:""}}),T=o.View.extend({events:{"click .property-set-sale a":"setProp","click #J_packageTab a":"setPackage","click #J_huabeiBody a":"setHuabei","click .vm-minus":"quantityMinus","click .vm-plus":"quantityPlus","keyup #J_quantity":"enterQuantity","input #J_quantity":"enterQuantity","click .vm-prop a":"activePackageItem","click #J_btnBuy":"distributeSubmit","click #J_panicBuyingLogin":"triggerLogin"},packageTabCompiled:a.template(k),packageItemCompiled:a.template(w),imgLoaded:[],initialize:function(){var e=this;e.listenTo(e.model,"change:pvs",e.updatePvs),e.listenTo(e.model,"change:propSet",e.mergeSkuModel),e.listenTo(e.model,"change:activePackage",e.activePackage),e.listenTo(e.model,"change:packageIds",e.handlerPackage),e.listenTo(e.model,"change:names",e.updateNames),e.listenTo(e.model,"change:images",e.updateImages),e.listenTo(e.model,"change:stock",e.updateStock),e.listenTo(e.model,"change:buyButton",e.updateButton),e.listenTo(e.model,"change:packageName",e.updateSummaryInfo),e.listenTo(e.model,"change:attributes",e.updateSummaryInfo),e.listenTo(e.model,"change:mainPriceCent",e.updatePrice),e.listenTo(e.model,"change:packageTotalPriceCent",e.setTotalPrice),e.listenTo(e.model,"change:total",e.updateTotal),e.listenTo(e.model,"change:quantity",e.updateQuantity),e.listenTo(e.model,"change:skuId",e.handlerSkuChange),e.listenTo(e.model,"change:costPriceCent",e.updateCostPrice),e.listenTo(e.model,"change:appPrice",e.updateAppPrice),e.initSku()},initSku:function(){var e=this,t=e.model,i=t.get("recommend"),a=i.split("+")[0],s=i.split("+")[1],o=a.split(";"),r=[],c=[],d={};n.each(o,function(t,i){c=i.split(":"),d[c[0]]=i,r.push(c[0]),e.$el.find('[data-value="'+i+'"]').addClass("selected")}),void 0!==s&&e.model.set("initPvs",i),t.set({propItem:r,propSet:d}),e.analysis(),e.initPageContent()},initPageContent:function(){var e=Number(M.serverTime.val()),t=x.modelData.discount&&x.modelData.discount.endTime||0,i=t-e,n=i>864e5;x.modelData.discount&&n?M.discountCountDown.html('<span class="vm-label">剩余&nbsp;</span><span class="vm-day">'+Math.round(i/864e5)+"</span><span>天</span>"):x.modelData.discount&&i>0&&c.countDown(M.serverTime.val(),x.modelData.discount.endTime,A.getDiscountTime,A.closeDiscountCountDown),M.quantity.val(1)},triggerLogin:function(){var e=n(".site-login").attr("href");location.href=e},quantityMinus:function(e){e.preventDefault();var t=n(e.currentTarget),i=t.siblings("input"),a=i.val();t.hasClass("disabled")||(a=n.isNumeric(a)?parseInt(a,10)-1:1,a<=0&&(a=1),this.model.set("quantity",a))},quantityPlus:function(e){e.preventDefault();var t=n(e.currentTarget),i=t.siblings("input"),a=i.data("max"),s=i.val();t.hasClass("disabled")||(s=n.isNumeric(s)?parseInt(s,10)+1:1,a&&s>=a?s=a:s>500&&(s=500),this.model.set("quantity",s))},enterQuantity:function(e){e.preventDefault();var t=n(e.currentTarget),i=2===this.model.get("type")?1:i=M.quantity.data("max"),a=t.val();a=n.isNumeric(a)?parseInt(a,10):1,a<=0&&(a=1),i&&a>=i?a=i:a>500&&(a=500),t.val(a),this.model.set("quantity",a)},getSkuModel:function(e,t){var i,n=this;if(i=t?n.collection.find(function(t){return t.get("id").match(e)}):n.collection.get(e))return i=i.toJSON(),i.id.split(";").forEach(function(e){delete i[e.split(":")[0]]}),delete i.id,i},handlerSkuChange:function(){var e=this;e.handlerPriceOrDiscount(),e.setInitQuantity(1),S.isSupportHuabei&&e.huabeiRender()},huabeiRender:function(){var e=this,t=e.model,i=t.get("quantity")||1,a=[];t.get("huabei")&&t.get("huabei").length&&(t.get("huabei").forEach(function(e){a.push({eachPrice:e.eachPriceCent*i,period:e.period,eachRatePrice:e.eachRatePriceCent*i})}),M.huabeiBd.children().each(function(e){var t,i,s=n(this);a[e]&&(t="¥"+a[e].eachPrice.toFixed(2)+"×"+a[e].period+"期",i=0==a[e].eachRatePrice?"免手续费":"含手续费 ￥"+a[e].eachRatePrice.toFixed(2)+"/期",s.find(".vm-periods").text(t).next().text(i))}))},getCurrentUrl:function(){var e=window.location.href;return e=location.search||location.hash||location.href.match(/[\?\#]/)?e.slice(0,location.href.search(/[\?\#]/)):location.href},pushHistory:function(e,t,i){window.history.pushState&&window.history.pushState(e,document.title,i)},handlerPriceOrDiscount:function(){var e,t,i,a=this,s=a.model,o=s.get("discountKeys"),r=s.get("priceCent"),c=s.get("pvs");e=s.get("isPackage")&&s.get("activePackage")?c+"+"+s.get("activePackage"):o&&n.inArray(c+"+0",o)!==-1?c+"+0":c,o&&n.inArray(e,o)!==-1?(t=x.modelData.discount.cspuMap[e].priceCent,i=r):(t=r,i=0),s.set({mainPriceCent:t,costPriceCent:i})},updateSummaryInfo:function(){var e=this.model,t=e.get("attributes"),i=e.get("packageName"),n=t;i&&(n+=" "+i),M.summaryName.text(n)},updateAppPrice:function(e,t){0!==t?(M.propertySellAppPrice.show(),M.appPrice.text(t),M.appPriceTip.show()):M.propertySellAppPrice.hide()},updatePrice:function(e,t){M.price.text((t/100).toFixed(2)),this.setTotalPrice()},setTotalPrice:function(){var e=this,t=e.model,i=t.get("packageTotalPriceCent"),n=t.get("mainPriceCent");t.set("total",i+n)},updateCostPrice:function(){var e=this,t=e.model.get("costPriceCent"),i=e.model.get("mainPriceCent"),n=e.model.get("packageTotalPriceCent"),a=e.model.get("packageTotalProfitsCent");t>0&&i<t?(n&&(t=t+n+a),M.originalPrice.text("¥ "+(t/100).toFixed(2)).show(),M.activityCon.show()):(M.originalPrice.empty().hide(),M.activityCon.hide())},updateTotal:function(e,t){var i,n=this,a=e.get("quantity");t=t||e.get("total"),i=t/100*a,M.price.text((t/100).toFixed(2)),M.totalPriceShortcut.text("￥"+i.toFixed(2)),n.huabeiRender()},updateNames:function(e,t){M.summaryMain.html(t+"&nbsp;&nbsp;￥"+e.get("price"))},preloadImages:function(e){var t,i=this;e&&e.length&&(t=n.map(e,function(e){return i.imageUrlProcess(e,680)}),n.each(t,function(e,t){if(n.inArray(t,i.imgLoaded)===-1){var a=new Image;a.src=t,a.complete?i.imgLoaded.push(t):a.onload=a.onerror=function(){i.imgLoaded.push(a),a.onload=a.onerror=null}}}))},imageUrlProcess:function(e,t,i){var n;return i=i||".jpg",n=/^\/\/openfile/.test(e)?e+t+"x"+t+i:e+"@"+t+"x"+t+i},updateImages:function(e,t){var i=this,a=i.imageUrlProcess(t[0],680),s="";M.imgBooth.find("img").attr("src",a),n.each(t,function(e){var n=i.imageUrlProcess(t[e],120);s+='<li><a data-mtype="click_store_de_tp_'+(e+1)+'" data-bh="click_store_de_tp_'+(e+1)+'" href="#"><img src="'+n+'" width="80" height="80"></a></li>'}),M.previewThumb.html(s),M.previewThumb.find("li:first").addClass("current"),i.preloadImages(t)},updatePvs:function(e,t,i){var a,s=this,o=e.get("isPackage"),r=e.get("skus"),c=e.get("activePackage"),d=t+"+"+c;a=c||0===c?s.getSkuModel(d):s.getSkuModel(t,!0),i===!0?e.set({buyButton:"售罄",stock:0}):o&&r[d]&&e.set(n.extend(e.toJSON(),a))},panicBuyingStockStatus:function(e){var t=this,i=t.model.get("activeStatus");if(1===i)return s.isLogin?void t.getPanicBuyingStatus().done(function(i){if(3===i.activeStatus)return M.btnBuy.text("活动已结束").addClass("disabled"),M.panicBuyingWrap.empty(),A.closeOrderModal(),void t.model.set("activeStatus",3);switch(i.stockStatus){case 1:M.panicBuyingWrap.empty(),1===i.activeStatus&&M.btnBuy.hasClass("disabled")&&M.btnBuy.text("立即抢购").removeClass("disabled"),"buying"===e&&t.orderToken&&t.buyNow(t.orderToken);break;case 2:M.btnBuy.text("还有机会").addClass("disabled"),M.panicBuyingWrap.html("该商品有用户下单后未付款，还有机会抢到"),A.closeOrderModal();break;case 3:M.btnBuy.text("已售罄").addClass("disabled"),M.panicBuyingWrap.empty(),A.closeOrderModal()}}):void M.btnBuy.text("请先登录").addClass("notlogin")},getPanicBuyingStatus:function(){var e=this,t=e.model,i=t.get("skuId"),a=t.get("activePackage"),s=t.get("packageSkuIds"),o=n.Deferred();return i?n.ajax({url:A.remoteURL.getPanicBuyingStatus,type:"get",data:{skuId:i,packageId:a||"",packageSkuIdList:s?s.join(","):""},dataType:"json"}).done(function(e){e.success?o.resolve(e.data):o.reject(e.error)}).fail(function(){o.reject()}):o.reject(),o.promise()},syncQuantityStatus:function(e){var t=2===this.model.get("type")?1:t=M.quantity.data("max");t&&e>=t?M.quantity.next().addClass("disabled"):M.quantity.next().removeClass("disabled"),1===e?M.quantity.prev().addClass("disabled"):M.quantity.prev().removeClass("disabled")},setInitQuantity:function(e){var t=this,i=t.model;i.set("quantity",e),t.syncQuantityStatus(e)},updateQuantity:function(e,t){var i=this;i.syncQuantityStatus(t),M.quantity.val(t),i.updateTotal(e)},setProp:function(e){e.preventDefault();var t,i=this,a=n(e.currentTarget),s=a.data("value");a.hasClass("disabled")||a.hasClass("selected")||(t=i.automaticImprovement(s),i.model.set({propSet:t}),i.activeSales(),i.analysis(),i.clearMessage())},setPackage:function(e,t){e.preventDefault();var i=this,a=i.model,s=n(e.currentTarget),o=s.data("value"),r=s.attr("title");t=a.get("initSelectedPackage"),s.hasClass("disabled")||s.hasClass("selected")||(s.addClass("selected").siblings().removeClass("selected"),a.set({activePackage:""},{silent:!0}),a.set({activePackage:o,packageName:r}),t&&a.set({initSelectedPackage:!1}),n("#J_triangle").hide().css("left",s.position().left+s.width()/2).show(),i.clearMessage())},setHuabei:function(e){e.preventDefault();var t=this,i=t.model,a=n(e.currentTarget),s=a.data("value");a.hasClass("selected")?(a.removeClass("selected"),i.set("periods","")):(a.addClass("selected").siblings().removeClass("selected"),i.set("periods",s))},getPackageStatus:function(e){var t,i,n=this,a=n.model,s=a.get("pvs"),o={avaiSkus:[],avaiPackages:[]},r=a.get("initPvs");return e.forEach(function(e){t=s+"+"+e.id,i=n.getSkuModel(t),r==t&&e.available?o.avaiSkus.unshift(e.id):e.available&&i&&1===i.stock?o.avaiSkus.push(e.id):e.available&&o.avaiPackages.push(e.id)}),o},handlerPackage:function(e,t){var i,a,s=this,o=e.get("packageMap"),r=[];M.packageContent.hide(),M.packageBody.empty(),t&&t.length?(n.each(t,function(e,t){i=o[t],i.id=t,r.push(i)}),M.packageTab.html(s.packageTabCompiled({packages:r})),a=s.getPackageStatus(r),a.avaiSkus.length?M.packageTab.find("[data-value="+a.avaiSkus[0]+"]").trigger("click"):a.avaiPackages.length?M.packageTab.find("[data-value="+a.avaiPackages[0]+"]").trigger("click"):e.set({activePackage:"",stock:0,buyButton:"售罄"})):(e.set("activePackage","",{silent:!0}),e.set({packageSkuIds:null,packageTotalPriceCent:0}))},activePackageItem:function(e){var t=this,i=n(e.currentTarget);i.addClass("selected").siblings().removeClass("selected"),t.switchPackageItem(e.currentTarget),t.packageCalculate("activePackageItem"),t.updatePackagePrice(),t.updateCostPrice()},switchPackageItem:function(e){var t,i,a=this,s=a.model,o=s.get("packageItems"),r=n(e),c=r.data("sid"),d=r.data("key");c&&d&&(t=o[c].cells[d],i=a.imageUrlProcess(t.images,80),r.parents("li").find(".vm-pic img").attr({src:i,alt:t.names}))},packageCalculate:function(e){var t,i=this,a=i.model,s=a.get("packageItems"),o=[],r=[],c={},d=0,l=0;M.packageBody.find(".selected").each(function(){var e=n(this),i=e.data("sku"),a=e.data("sid"),c=e.data("key");o.push(i),a&&c&&(t=s[a].cells[c],t.fullName=s[a].name+"&nbsp;"+t.names,r.push(t))}),n.each(r,function(e,t){c[t.skuId]=t.fullName,d+=t.priceCent,l+=t.originPriceCent-t.priceCent}),"activePackage"==e?(i.model.set("packageSkuIds",o,{silent:!0}),i.model.set({packageSet:c,packageTotalPriceCent:d,packageTotalProfitsCent:l})):i.model.set({packageSkuIds:o,packageSet:c,packageTotalPriceCent:d,packageTotalProfitsCent:l})},updatePackagePrice:function(){var e=this,t=e.model.get("packageTotalPriceCent")/100,i=e.model.get("packageTotalProfitsCent")/100,n=M.packageTab.find(".selected").find(".vm-text-profits");M.packageTab.find(".selected").find(".vm-text-price").text(t+"元"),i>0?n.html("省<em>"+i+"</em>元").show():n.hide()},renderPackageContent:function(e){var t,i=this,a=i.model.get("packageItems"),s=i.model.get("initSelectedPackage"),o=[];e&&n.isArray(e)?(n.each(e,function(e,i){t=n.extend({},a[i]),t.id=i,o.push(t)}),M.packageBody.html(i.packageItemCompiled({items:o})),s?M.packageContent.show():M.packageContent.slideDown()):(M.packageContent.hide(),M.packageBody.empty(),M.packageTab.find(".selected").addClass("single"))},activePackage:function(e,t){var i=this,n=e.get("packageMap"),a=e.get("pvs")+"+"+t,s=i.getSkuModel(a);(t||0===t)&&n[t]?(i.renderPackageContent(n[t].items),i.packageCalculate("activePackage"),i.model.set(s)):(M.packageContent.hide(),M.packageBody.empty(),i.model.set({packageSet:null,packageSkuIds:null,packageTotalPriceCent:0,packageTotalProfitsCent:0})),i.updateCostPrice()},mergeSkuModel:function(e,t){var i=this,n=e.get("propItem"),a=e.get("isPackage"),s="",o=n.every(function(e,i){return s+=0===i?t[e]:";"+t[e],""!==t[e]});o&&(a?i.packageMerge(s):i.generalMerge(s))},generalMerge:function(e){var t,i=this,n=i.model.get("skus");t=n[e+"+0"]?i.getSkuModel(e+"+0"):i.getSkuModel(e),i.model.set("pvs",t.pvs,{silent:!0}),delete t.pvs,i.model.set(t)},packageMerge:function(e){var t,i,s,o=this,r=o.model,c=r.get("packageIds"),d=r.get("packageMap"),l=["cspuId","price","originPrice","names","itemName","attributes","images","packageIds","priceCent","huabei","appPrice"];t=o.getSkuModel(e+"+",!0),i=n.extend(!0,{},t);for(var u in t)l.indexOf(u)===-1&&delete t[u];s=i.packageIds.some(function(e){return d[e]&&d[e].available}),s?a.isEqual(i.packageIds,c)?(o.model.set(t),o.model.set("pvs",i.pvs)):(o.model.set("pvs",i.pvs,{silent:!0}),o.model.set(t)):(o.model.set(i),o.updatePvs(r,i.pvs,!0))},automaticImprovement:function(e){var t,i,a,s,o,r=this,c=r.model.get("propItem"),d=n.extend({},r.model.get("propSet")),l=e.split(":")[0],u=c.indexOf(l),p=r.collection,m={};d[l]=e;for(var v in d)d[v]&&(t=d[v].split(":"),m[t[0]]=t[1]);return(i=p.findWhere(m))?d:(a=f.lineRecommendPvs.call(r,u,m),a.done?o=a.stockPvs:(s=f.pointRecommendPvs.call(r,l,m),o=s.stockPvs||a.noStockPvs||s.noStockPvs),o?h.conversionSkuKeyToObj(o):void 0)},activeSales:function(){var e=this,t=e.model.get("propSet");for(var i in t)e.$el.find('.property-set-sale a[data-value="'+t[i]+'"]').addClass("selected").siblings().removeClass("selected")},analysis:function(){var e,t,i=this,a=i.model.get("propItem"),s=n.extend({},i.model.get("propSet")),o=i.collection,r={};for(var c in s)s[c]&&(e=s[c].split(":"),r[e[0]]=e[1]);a.forEach(function(e,a,s){if(a>0){var c=n.extend({},r),d=i.$el.find('.property-set-sale a[data-value^="'+e+'"]'),l=[],u=s.slice(a);u.forEach(function(e){delete c[e]}),t=o.where(c),t.forEach(function(t){var i=t.get(e);l.indexOf(i)===-1&&l.push(i)}),d.removeClass("disabled").filter(function(){var e=n(this).data("value"),t=e.split(":")[1];return n.inArray(t,l)===-1}).addClass("disabled")}})},validate:function(){var e=this,t=e.model,i=e.$el.find(".property-set-sale"),s=t.get("propSet"),o=t.get("propItem"),r=t.get("quantity"),c=t.get("packageMap"),d=t.get("activePackage"),l=[],u=!0,p="";return s&&o.every(function(e){return""!==s[e]}),n.each(o,function(e,t){var n;s[t]||(n=i.eq(e).data("property"),l.push(n))}),a.isEmpty(c)||""!==d||l.push("套餐"),l.length&&(p="请选择："+l.join("、"),u=!1),n.isNumeric(r)||(p="请确认输入了正确的商品数量",u=!1),{isValid:u,message:p}},validateRemote:function(){function e(e){var t,i=[],o=!0;n.each(e,function(e,t){t||(i.push(e),o=!1)}),o?u.resolve():(t=i[0]==a?"商品"+s+" 已售罄":"套餐中的 "+d[i[0]]+" 已售罄",u.reject(t))}var t=this,i=t.model,a=i.get("skuId"),s=i.get("names"),o=i.get("packageMap"),r=i.get("activePackage"),c=i.get("packageSkuIds"),d=i.get("packageSet"),l=[],u=n.Deferred();return l.push(a),r&&c&&c.length&&(l=l.concat(c)),""!==r&&o[r]&&(s=s+" "+o[r].name),n.ajax({url:A.remoteURL.getStock,type:"get",data:{skuId:l.join(",")},dataType:"json"}).done(function(t){t.success?e(t.data):u.reject(t.error)}).fail(function(){}),u.promise()},clearMessage:function(){var e=this;e.isComingSale()||M.message.text("").removeClass("error")},isComingSale:function(){var e=this,t=e.model,i=!1;return 1===t.get("type")&&2===t.get("activeStatus")&&(i=!0),i},buyNow:function(e){var t=this,i=t.model.toJSON(),a=i.packageSkuIds?i.packageSkuIds.join(","):"",s=n("<form>"),o=['<input type="hidden" name="sku_id" value="'+i.skuId+'" />','<input type="hidden" name="numbers" value="'+i.quantity+'"/>','<input type="hidden" name="package_id" value="'+i.activePackage+'" />','<input type="hidden" name="package_list" value="'+a+'"/>'];e&&o.push('<input type="hidden" name="token" value="'+e+'"/>'),S.isSupportHuabei&&i.periods&&o.push('<input type="hidden" name="periods" value="'+i.periods+'"/>'),i.hasGiftCard&&o.push('<input type="hidden" name="present_mark" value="1"/>'),s.attr({action:A.remoteURL.orderAdd,method:"POST"}).html(o.join("")).appendTo("body").submit()},distributeSubmit:function(e){var t,i=this,a=2===i.model.get("type"),o=n(e.currentTarget),r=i.model.toJSON();if(MeizuBH({mzSku:r.skuId}),!o.hasClass("disabled")&&!o.hasClass("locked")){if(t=i.validate(),!t.isValid)return void M.message.html(t.message).addClass("error");if(!s.isLogin)return void c.login("store");a?i.panicBuyingSubmit():i.submit(),o.lockButton()}},panicBuyingSubmit:function(){function e(){n.ajax({url:A.remoteURL.getToken,type:"get",data:{itemId:x.modelData.itemId},dataType:"jsonp"}).done(function(e){e.success?(t.orderToken=e.data,t.panicBuyingStockStatus("buying"),A.closeOrderModal()):t.executeTokenException(e.errorCode||e.code)})}var t=this;if(t.orderToken)return void t.panicBuyingStockStatus("buying");try{e(),window.modalTimer=setTimeout(function(){A.orderDialog||A.startOrderModal()},1e3),window.tokenTimer=setInterval(function(){A.orderDialog||A.startOrderModal(),e()},2e3),window.stockWhenOrderTimer=setInterval(function(){t.panicBuyingStockStatus("ordering")},3e4)}catch(i){A.closeOrderModal()}},executeTokenException:function(e){var t=this;switch(e){case 401:A.closeOrderModal(),c.login("store");break;case 5002:A.closeOrderModal(),t.panicBuyingStockStatus()}},submit:function(){var e=this;e.validateRemote().done(function(){e.buyNow()}).fail(function(e){"login first"==e?c.login("store"):e&&M.message.html(e).addClass("error")})}}),A={remoteURL:{orderAdd:"//ordercenter.meizu.com/order/add.html",getStock:"//detail.meizu.com/api/sku/stock",getSaleStatus:"//detail.meizu.com/api/item/sale_status",getPanicBuyingStatus:"//detail.meizu.com/api/sku/sale_status",getToken:"//pyramid.meizu.com/queue/token"},parseSku:function(e){var t,i,a=[];return n.each(e,function(e,s){t=e.split("+")[0],n.each(t.split(";"),function(e,t){i=t.split(":"),s[i[0]]=i[1]}),s.id=e,s.pvs=t,a.push(s)}),a},startOrderModal:function(){var e=this;e.orderDialog=r({width:600,height:500,content:_,zIndex:1e5,onshow:function(){n("#J_DialogClose").on("click.dialog",function(){A.closeOrderModal()})},onclose:function(){A.closeOrderModal(),n("#J_DialogClose").off("click.dialog")},backdropOpacity:.4}).showModal()},closeOrderModal:function(){window.modalTimer&&clearTimeout(window.modalTimer),window.tokenTimer&&clearInterval(window.tokenTimer),window.stockWhenOrderTimer&&clearInterval(window.stockWhenOrderTimer),this.orderDialog&&(this.orderDialog.remove(),this.orderDialog=!1)},getRecommend:function(){var e,t=h.queryString("skuid");return e=t&&x.modelData.skuMap[t]?x.modelData.skuMap[t]:x.modelData.recommend},getDiscountTime:function(e){var t,i=[];e&&(i.push(Math.floor(e/3600)),i.push(Math.floor(e%3600/60)>=10?Math.floor(e%3600/60):"0"+Math.floor(e%3600/60)),i.push(Math.floor(e%60)>=10?Math.floor(e%60):"0"+Math.floor(e%60)),t=i.join('<span class="vm-separator">:</span>').replace(/\d/gi,'<span class="vm-num">$&</span>'),M.discountCountDown.html('<span class="vm-label">剩余&nbsp;</span>'+t))},closeDiscountCountDown:function(){location.reload()},getShowTime:function(e){var t,i=new Date;return i.setTime(e),t=i.getMonth()+1+"月"+i.getDate()+"日 "+(i.getHours()>=10?i.getHours():"0"+i.getHours())+":"+(i.getMinutes()>=10?i.getMinutes():"0"+i.getMinutes())+" 准时开售"}},window.livePropertyView=new T({el:"#property",model:new C({recommend:A.getRecommend(),packageMap:S.packageMap,skus:S.sku,packageItems:S.packageItems,isPackage:!a.isEmpty(S.packageMap),discountKeys:S.discount?a.keys(S.discount.cspuMap):null,shipping:S.shipping}),collection:new P(A.parseSku(S.sku))}),window.winTodoList=A,new l(window.livePropertyView,S.supportFastArrival),d.init(S.itemId),m(),new g,new v(window.livePropertyView),y.bindEvent(),new b(window.livePropertyView),new p(window.livePropertyView,S.itemId),new u(window.livePropertyView,S.itemId)},function(e,t){},,,,,,,,function(e,t){e.exports=meizuStoreGlobal.underscore},function(e,t){e.exports=meizuStoreGlobal},function(e,t,i){var n,a;(function(s){!function(o){var r="object"==typeof self&&self.self===self&&self||"object"==typeof s&&s.global===s&&s;n=[i(23),i(13),t],a=function(e,t,i){r.Backbone=o(r,i,e,t)}.apply(t,n),!(void 0!==a&&(e.exports=a))}(function(e,t,i,n){var a=e.Backbone,s=Array.prototype.slice;t.VERSION="1.3.3",t.$=n,t.noConflict=function(){return e.Backbone=a,this},t.emulateHTTP=!1,t.emulateJSON=!1;var o=function(e,t,n){switch(e){case 1:return function(){return i[t](this[n])};case 2:return function(e){return i[t](this[n],e)};case 3:return function(e,a){return i[t](this[n],c(e,this),a)};case 4:return function(e,a,s){return i[t](this[n],c(e,this),a,s)};default:return function(){var e=s.call(arguments);return e.unshift(this[n]),i[t].apply(i,e)}}},r=function(e,t,n){i.each(t,function(t,a){i[a]&&(e.prototype[a]=o(t,a,n))})},c=function(e,t){return i.isFunction(e)?e:i.isObject(e)&&!t._isModel(e)?d(e):i.isString(e)?function(t){return t.get(e)}:e},d=function(e){var t=i.matches(e);return function(e){return t(e.attributes)}},l=t.Events={},u=/\s+/,p=function(e,t,n,a,s){var o,r=0;if(n&&"object"==typeof n){void 0!==a&&"context"in s&&void 0===s.context&&(s.context=a);for(o=i.keys(n);r<o.length;r++)t=p(e,t,o[r],n[o[r]],s)}else if(n&&u.test(n))for(o=n.split(u);r<o.length;r++)t=e(t,o[r],a,s);else t=e(t,n,a,s);return t};l.on=function(e,t,i){return m(this,e,t,i)};var m=function(e,t,i,n,a){if(e._events=p(h,e._events||{},t,i,{context:n,ctx:e,listening:a}),a){var s=e._listeners||(e._listeners={});s[a.id]=a}return e};l.listenTo=function(e,t,n){if(!e)return this;var a=e._listenId||(e._listenId=i.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),o=s[a];if(!o){var r=this._listenId||(this._listenId=i.uniqueId("l"));o=s[a]={obj:e,objId:a,id:r,listeningTo:s,count:0}}return m(e,t,n,this,o),this};var h=function(e,t,i,n){if(i){var a=e[t]||(e[t]=[]),s=n.context,o=n.ctx,r=n.listening;r&&r.count++,a.push({callback:i,context:s,ctx:s||o,listening:r})}return e};l.off=function(e,t,i){return this._events?(this._events=p(f,this._events,e,t,{context:i,listeners:this._listeners}),this):this},l.stopListening=function(e,t,n){var a=this._listeningTo;if(!a)return this;for(var s=e?[e._listenId]:i.keys(a),o=0;o<s.length;o++){var r=a[s[o]];if(!r)break;r.obj.off(t,n,this)}return this};var f=function(e,t,n,a){if(e){var s,o=0,r=a.context,c=a.listeners;if(t||n||r){for(var d=t?[t]:i.keys(e);o<d.length;o++){t=d[o];var l=e[t];if(!l)break;for(var u=[],p=0;p<l.length;p++){var m=l[p];n&&n!==m.callback&&n!==m.callback._callback||r&&r!==m.context?u.push(m):(s=m.listening,s&&0===--s.count&&(delete c[s.id],delete s.listeningTo[s.objId]))}u.length?e[t]=u:delete e[t]}return e}for(var h=i.keys(c);o<h.length;o++)s=c[h[o]],delete c[s.id],delete s.listeningTo[s.objId]}};l.once=function(e,t,n){var a=p(v,{},e,t,i.bind(this.off,this));return"string"==typeof e&&null==n&&(t=void 0),this.on(a,t,n)},l.listenToOnce=function(e,t,n){var a=p(v,{},t,n,i.bind(this.stopListening,this,e));return this.listenTo(e,a)};var v=function(e,t,n,a){if(n){var s=e[t]=i.once(function(){a(t,s),n.apply(this,arguments)});s._callback=n}return e};l.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),i=Array(t),n=0;n<t;n++)i[n]=arguments[n+1];return p(g,this._events,e,void 0,i),this};var g=function(e,t,i,n){if(e){var a=e[t],s=e.all;a&&s&&(s=s.slice()),a&&y(a,n),s&&y(s,[t].concat(n))}return e},y=function(e,t){var i,n=-1,a=e.length,s=t[0],o=t[1],r=t[2];switch(t.length){case 0:for(;++n<a;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<a;)(i=e[n]).callback.call(i.ctx,s);return;case 2:for(;++n<a;)(i=e[n]).callback.call(i.ctx,s,o);return;case 3:for(;++n<a;)(i=e[n]).callback.call(i.ctx,s,o,r);return;default:for(;++n<a;)(i=e[n]).callback.apply(i.ctx,t);return}};l.bind=l.on,l.unbind=l.off,i.extend(t,l);var b=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{});var a=i.result(this,"defaults");n=i.defaults(i.extend({},a,n),a),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(b.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!i.iteratee(e,this)(this.attributes)},set:function(e,t,n){if(null==e)return this;var a;if("object"==typeof e?(a=e,n=t):(a={})[e]=t,n||(n={}),!this._validate(a,n))return!1;var s=n.unset,o=n.silent,r=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={});var d=this.attributes,l=this.changed,u=this._previousAttributes;for(var p in a)t=a[p],i.isEqual(d[p],t)||r.push(p),i.isEqual(u[p],t)?delete l[p]:l[p]=t,s?delete d[p]:d[p]=t;if(this.idAttribute in a&&(this.id=this.get(this.idAttribute)),!o){r.length&&(this._pending=n);for(var m=0;m<r.length;m++)this.trigger("change:"+r[m],this,d[r[m]],n)}if(c)return this;if(!o)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&i.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,n={};for(var a in e){var s=e[a];i.isEqual(t[a],s)||(n[a]=s)}return!!i.size(n)&&n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=i.extend({parse:!0},e);var t=this,n=e.success;return e.success=function(i){var a=e.parse?t.parse(i,e):i;return!!t.set(a,e)&&(n&&n.call(e.context,t,i,e),void t.trigger("sync",t,i,e))},H(this,e),this.sync("read",this,e)},save:function(e,t,n){var a;null==e||"object"==typeof e?(a=e,n=t):(a={})[e]=t,n=i.extend({validate:!0,parse:!0},n);var s=n.wait;if(a&&!s){if(!this.set(a,n))return!1}else if(!this._validate(a,n))return!1;var o=this,r=n.success,c=this.attributes;n.success=function(e){o.attributes=c;var t=n.parse?o.parse(e,n):e;return s&&(t=i.extend({},a,t)),!(t&&!o.set(t,n))&&(r&&r.call(n.context,o,e,n),void o.trigger("sync",o,e,n))},H(this,n),a&&s&&(this.attributes=i.extend({},c,a));var d=this.isNew()?"create":n.patch?"patch":"update";"patch"!==d||n.attrs||(n.attrs=a);var l=this.sync(d,this,n);return this.attributes=c,l},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,a=e.wait,s=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(i){a&&s(),n&&n.call(e.context,t,i,e),t.isNew()||t.trigger("sync",t,i,e)};var o=!1;return this.isNew()?i.defer(e.success):(H(this,e),o=this.sync("delete",this,e)),a||s(),o},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||z();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1)}});var k={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};r(b,k,"attributes");var w=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),
void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},_={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},S=function(e,t,i){i=Math.min(Math.max(i,0),e.length);var n,a=Array(e.length-i),s=t.length;for(n=0;n<a.length;n++)a[n]=e[n+i];for(n=0;n<s;n++)e[n+i]=t[n];for(n=0;n<a.length;n++)e[n+s+i]=a[n]};i.extend(w.prototype,l,{model:b,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,x))},remove:function(e,t){t=i.extend({},t);var n=!i.isArray(e);e=n?[e]:e.slice();var a=this._removeModels(e,t);return!t.silent&&a.length&&(t.changes={added:[],merged:[],removed:a},this.trigger("update",this,t)),n?a[0]:a},set:function(e,t){if(null!=e){t=i.extend({},_,t),t.parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var n=!i.isArray(e);e=n?[e]:e.slice();var a=t.at;null!=a&&(a=+a),a>this.length&&(a=this.length),a<0&&(a+=this.length+1);var s,o,r=[],c=[],d=[],l=[],u={},p=t.add,m=t.merge,h=t.remove,f=!1,v=this.comparator&&null==a&&t.sort!==!1,g=i.isString(this.comparator)?this.comparator:null;for(o=0;o<e.length;o++){s=e[o];var y=this.get(s);if(y){if(m&&s!==y){var b=this._isModel(s)?s.attributes:s;t.parse&&(b=y.parse(b,t)),y.set(b,t),d.push(y),v&&!f&&(f=y.hasChanged(g))}u[y.cid]||(u[y.cid]=!0,r.push(y)),e[o]=y}else p&&(s=e[o]=this._prepareModel(s,t),s&&(c.push(s),this._addReference(s,t),u[s.cid]=!0,r.push(s)))}if(h){for(o=0;o<this.length;o++)s=this.models[o],u[s.cid]||l.push(s);l.length&&this._removeModels(l,t)}var k=!1,w=!v&&p&&h;if(r.length&&w?(k=this.length!==r.length||i.some(this.models,function(e,t){return e!==r[t]}),this.models.length=0,S(this.models,r,0),this.length=this.models.length):c.length&&(v&&(f=!0),S(this.models,c,null==a?this.length:a),this.length=this.models.length),f&&this.sort({silent:!0}),!t.silent){for(o=0;o<c.length;o++)null!=a&&(t.index=a+o),s=c[o],s.trigger("add",s,this,t);(f||k)&&this.trigger("sort",this,t),(c.length||l.length||d.length)&&(t.changes={added:c,removed:l,merged:d},this.trigger("update",this,t))}return n?e[0]:e}},reset:function(e,t){t=t?i.clone(t):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return s.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var n=t.length;return i.isFunction(t)&&(t=i.bind(t,this)),1===n||i.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){e=i.extend({parse:!0},e);var t=e.success,n=this;return e.success=function(i){var a=e.reset?"reset":"set";n[a](i,e),t&&t.call(e.context,n,i,e),n.trigger("sync",n,i,e)},H(this,e),this.sync("read",this,e)},create:function(e,t){t=t?i.clone(t):{};var n=t.wait;if(e=this._prepareModel(e,t),!e)return!1;n||this.add(e,t);var a=this,s=t.success;return t.success=function(e,t,i){n&&a.add(e,i),s&&s.call(i.context,e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?i.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeModels:function(e,t){for(var i=[],n=0;n<e.length;n++){var a=this.get(e[n]);if(a){var s=this.indexOf(a);this.models.splice(s,1),this.length--,delete this._byId[a.cid];var o=this.modelId(a.attributes);null!=o&&delete this._byId[o],t.silent||(t.index=s,a.trigger("remove",a,this,t)),i.push(a),this._removeReference(a,t)}}return i},_isModel:function(e){return e instanceof b},_addReference:function(e,t){this._byId[e.cid]=e;var i=this.modelId(e.attributes);null!=i&&(this._byId[i]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var i=this.modelId(e.attributes);null!=i&&delete this._byId[i],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){if(t){if(("add"===e||"remove"===e)&&i!==this)return;if("destroy"===e&&this.remove(t,n),"change"===e){var a=this.modelId(t.previousAttributes()),s=this.modelId(t.attributes);a!==s&&(null!=a&&delete this._byId[a],null!=s&&(this._byId[s]=t))}}this.trigger.apply(this,arguments)}});var C={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};r(w,C,"models");var T=t.View=function(e){this.cid=i.uniqueId("view"),i.extend(this,i.pick(e,P)),this._ensureElement(),this.initialize.apply(this,arguments)},I=/^(\S+)\s*(.*)$/,P=["model","collection","el","id","attributes","className","tagName","events"];i.extend(T.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=i.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var n=e[t];if(i.isFunction(n)||(n=this[n]),n){var a=t.match(I);this.delegate(a[1],a[2],i.bind(n,this))}}return this},delegate:function(e,t,i){return this.$el.on(e+".delegateEvents"+this.cid,t,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,i){return this.$el.off(e+".delegateEvents"+this.cid,t,i),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,n,a){var s=A[e];i.defaults(a||(a={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};if(a.url||(o.url=i.result(n,"url")||z()),null!=a.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(a.attrs||n.toJSON(a))),a.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),a.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){o.type="POST",a.emulateJSON&&(o.data._method=s);var r=a.beforeSend;a.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",s),r)return r.apply(this,arguments)}}"GET"===o.type||a.emulateJSON||(o.processData=!1);var c=a.error;a.error=function(e,t,i){a.textStatus=t,a.errorThrown=i,c&&c.call(a.context,e,t,i)};var d=a.xhr=t.ajax(i.extend(o,a));return n.trigger("request",n,d,a),d};var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var M=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},D=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,j=/\*\w+/g,N=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(M.prototype,l,{initialize:function(){},route:function(e,n,a){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(a=n,n=""),a||(a=this[n]);var s=this;return t.history.route(e,function(i){var o=s._extractParameters(e,i);s.execute(a,o,n)!==!1&&(s.trigger.apply(s,["route:"+n].concat(o)),s.trigger("route",n,o),t.history.trigger("route",s,n,o))}),this},execute:function(e,t,i){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(N,"\\$&").replace(D,"(?:$1)?").replace(E,function(e,t){return t?e:"([^/?]+)"}).replace(j,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var L=t.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},B=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,q=/#.*$/;L.started=!1,i.extend(L.prototype,l,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(B,"")},start:function(e){if(L.started)throw new Error("Backbone.history has already been started");if(L.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(O,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,a=n.insertBefore(this.iframe,n.firstChild).contentWindow;a.document.open(),a.document.close(),a.location.hash="#"+this.fragment}var s=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),L.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t!==this.fragment&&(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),i.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!L.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var i=this.root;""!==e&&"?"!==e.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+e;if(e=this.decodeFragment(e.replace(q,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var a=this.iframe.contentWindow;t.replace||(a.document.open(),a.document.close()),this._updateHash(a.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new L;var J=function(e,t){var n,a=this;return n=e&&i.has(e,"constructor")?e.constructor:function(){return a.apply(this,arguments)},i.extend(n,a,t),n.prototype=i.create(a.prototype,e),n.prototype.constructor=n,n.__super__=a.prototype,n};b.extend=w.extend=M.extend=T.extend=L.extend=J;var z=function(){throw new Error('A "url" property or function must be specified')},H=function(e,t){var i=t.error;t.error=function(n){i&&i.call(t.context,e,n,t),e.trigger("error",e,n,t)}};return t})}).call(t,function(){return this}())},function(e,t,i){var n=i(13);!function(){function e(t){var n=i[t],a="exports";return"object"==typeof n?n:(n[a]||(n[a]={},n[a]=n.call(n[a],e,n[a],n)||n[a]),n[a])}function t(e,t){i[e]=t}var i={};t("jquery",function(){return n}),t("popup",function(e){function t(){this.destroyed=!1,this.__popup=i("<div />").css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1").html(this.innerHTML).appendTo("body"),this.__backdrop=this.__mask=i("<div />").css({opacity:.7,background:"#000"}),this.node=this.__popup[0],this.backdrop=this.__backdrop[0],n++}var i=e("jquery"),n=0,a=!("minWidth"in i("html")[0].style),s=!a;return i.extend(t.prototype,{node:null,backdrop:null,fixed:!1,destroyed:!0,open:!1,returnValue:"",autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-popup",show:function(e){if(this.destroyed)return this;var n=this.__popup,o=this.__backdrop;if(this.__activeElement=this.__getActive(),this.open=!0,this.follow=e||this.follow,!this.__ready){if(n.addClass(this.className).attr("role",this.modal?"alertdialog":"dialog").css("position",this.fixed?"fixed":"absolute"),a||i(window).on("resize",i.proxy(this.reset,this)),this.modal){var r={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",zIndex:this.zIndex||t.zIndex};n.addClass(this.className+"-modal"),s||i.extend(r,{position:"absolute",width:i(window).width()+"px",height:i(document).height()+"px"}),o.css(r).attr({tabindex:"0"}).on("focus",i.proxy(this.focus,this)),this.__mask=o.clone(!0).attr("style","").insertAfter(n),o.addClass(this.className+"-backdrop").insertBefore(n),this.__ready=!0}n.html()||n.html(this.innerHTML)}return n.addClass(this.className+"-show").show(),o.show(),this.reset().focus(),this.__dispatchEvent("show"),this},showModal:function(){return this.modal=!0,this.show.apply(this,arguments)},close:function(e){return!this.destroyed&&this.open&&(void 0!==e&&(this.returnValue=e),this.__popup.hide().removeClass(this.className+"-show"),this.__backdrop.hide(),this.open=!1,this.blur(),this.__dispatchEvent("close")),this},remove:function(){if(this.destroyed)return this;this.__dispatchEvent("beforeremove"),t.current===this&&(t.current=null),this.__popup.remove(),this.__backdrop.remove(),this.__mask.remove(),a||i(window).off("resize",this.reset),this.__dispatchEvent("remove");for(var e in this)delete this[e];return this},reset:function(){var e=this.follow;return e?this.__follow(e):this.__center(),this.__dispatchEvent("reset"),this},focus:function(){var e=this.node,n=this.__popup,a=t.current,s=this.zIndex=t.zIndex++;if(a&&a!==this&&a.blur(!1),!i.contains(e,this.__getActive())){var o=n.find("[autofocus]")[0];!this._autofocus&&o?this._autofocus=!0:o=e,this.__focus(o)}return n.css("zIndex",s),t.current=this,n.addClass(this.className+"-focus"),this.__dispatchEvent("focus"),this},blur:function(){var e=this.__activeElement,t=arguments[0];return t!==!1&&this.__focus(e),this._autofocus=!1,this.__popup.removeClass(this.className+"-focus"),this.__dispatchEvent("blur"),this},addEventListener:function(e,t){return this.__getEventListener(e).push(t),this},removeEventListener:function(e,t){for(var i=this.__getEventListener(e),n=0;n<i.length;n++)t===i[n]&&i.splice(n--,1);return this},__getEventListener:function(e){var t=this.__listener;return t||(t=this.__listener={}),t[e]||(t[e]=[]),t[e]},__dispatchEvent:function(e){var t=this.__getEventListener(e);this["on"+e]&&this["on"+e]();for(var i=0;i<t.length;i++)t[i].call(this)},__focus:function(e){try{this.autofocus&&!/^iframe$/i.test(e.nodeName)&&e.focus()}catch(t){}},__getActive:function(){try{var e=document.activeElement,t=e.contentDocument,i=t&&t.activeElement||e;return i}catch(n){}},__center:function(){var e=this.__popup,t=i(window),n=i(document),a=this.fixed,s=a?0:n.scrollLeft(),o=a?0:n.scrollTop(),r=t.width(),c=t.height(),d=e.width(),l=e.height(),u=(r-d)/2+s,p=382*(c-l)/1e3+o,m=e[0].style;m.left=Math.max(parseInt(u),s)+"px",m.top=Math.max(parseInt(p),o)+"px"},__follow:function(e){var t=e.parentNode&&i(e),n=this.__popup;if(this.__followSkin&&n.removeClass(this.__followSkin),t){var a=t.offset();if(a.left*a.top<0)return this.__center()}var s=this,o=this.fixed,r=i(window),c=i(document),d=r.width(),l=r.height(),u=c.scrollLeft(),p=c.scrollTop(),m=n.width(),h=n.height(),f=t?t.outerWidth():0,v=t?t.outerHeight():0,g=this.__offset(e),y=g.left,b=g.top,k=o?y-u:y,w=o?b-p:b,_=o?0:u,x=o?0:p,S=_+d-m,C=x+l-h,T={},I=this.align.split(" "),P=this.className+"-",A={top:"bottom",bottom:"top",left:"right",right:"left"},M={top:"top",bottom:"top",left:"left",right:"left"},D=[{top:w-h,bottom:w+v,left:k-m,right:k+f},{top:w,bottom:w-h+v,left:k,right:k-m+f}],E={left:k+f/2-m/2,top:w+v/2-h/2},j={left:[_,S],top:[x,C]};i.each(I,function(e,t){D[e][t]>j[M[t]][1]&&(t=I[e]=A[t]),D[e][t]<j[M[t]][0]&&(I[e]=A[t])}),I[1]||(M[I[1]]="left"===M[I[0]]?"top":"left",D[1][I[1]]=E[M[I[1]]]),P+=I.join("-")+" "+this.className+"-follow",s.__followSkin=P,t&&n.addClass(P),T[M[I[0]]]=parseInt(D[0][I[0]]),T[M[I[1]]]=parseInt(D[1][I[1]]),n.css(T)},__offset:function(e){var t=e.parentNode,n=t?i(e).offset():{left:e.pageX,top:e.pageY};e=t?e:e.target;var a=e.ownerDocument,s=a.defaultView||a.parentWindow;if(s==window)return n;var o=s.frameElement,r=i(a),c=r.scrollLeft(),d=r.scrollTop(),l=i(o).offset(),u=l.left,p=l.top;return{left:n.left+u-c,top:n.top+p-d}}}),t.zIndex=1024,t.current=null,t}),t("dialog-config",{backdropBackground:"#000",backdropOpacity:.7,content:'<span class="ui-dialog-loading">Loading..</span>',title:"",statusbar:"",button:null,ok:null,cancel:null,okValue:"ok",cancelValue:"cancel",cancelDisplay:!0,width:"",height:"",padding:"",skin:"",quickClose:!1,cssUri:"../css/ui-dialog.css",innerHTML:'<div i="dialog" class="ui-dialog"><div class="ui-dialog-arrow-a"></div><div class="ui-dialog-arrow-b"></div><table class="ui-dialog-grid"><tr><td i="header" class="ui-dialog-header"><button i="close" class="ui-dialog-close">&#215;</button><div i="title" class="ui-dialog-title"></div></td></tr><tr><td i="body" class="ui-dialog-body"><div i="content" class="ui-dialog-content"></div></td></tr><tr><td i="footer" class="ui-dialog-footer"><div i="statusbar" class="ui-dialog-statusbar"></div><div i="button" class="ui-dialog-button"></div></td></tr></table></div>'}),t("dialog",function(e){var t=e("jquery"),i=e("popup"),n=e("dialog-config"),a=n.cssUri;if(a){var s=e[e.toUrl?"toUrl":"resolve"];s&&(a=s(a),a='<link rel="stylesheet" href="'+a+'" />',t("base")[0]?t("base").before(a):t("head").append(a))}var o=0,r=new Date-0,c=!("minWidth"in t("html")[0].style),d="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),l=!c&&!d,u=function(e,i,n){var a=e=e||{};("string"==typeof e||1===e.nodeType)&&(e={content:e,fixed:!d}),e=t.extend(!0,{},u.defaults,e),e.original=a;var s=e.id=e.id||r+o,c=u.get(s);return c?c.focus():(l||(e.fixed=!1),e.quickClose&&(e.modal=!0,e.backdropOpacity=0),t.isArray(e.button)||(e.button=[]),void 0!==n&&(e.cancel=n),e.cancel&&e.button.push({id:"cancel",value:e.cancelValue,callback:e.cancel,display:e.cancelDisplay}),void 0!==i&&(e.ok=i),e.ok&&e.button.push({id:"ok",value:e.okValue,callback:e.ok,autofocus:!0}),u.list[s]=new u.create(e))},p=function(){};p.prototype=i.prototype;var m=u.prototype=new p;return u.create=function(e){var n=this;t.extend(this,new i);var a=(e.original,t(this.node).html(e.innerHTML)),s=t(this.backdrop);return this.options=e,this._popup=a,t.each(e,function(e,t){"function"==typeof n[e]?n[e](t):n[e]=t}),e.zIndex&&(i.zIndex=e.zIndex),a.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")}),this._$("close").css("display",this.cancel===!1?"none":"").attr("title",this.cancelValue).on("click",function(e){n._trigger("cancel"),e.preventDefault()}),this._$("dialog").addClass(this.skin),this._$("body").css("padding",this.padding),e.quickClose&&s.on("onmousedown"in document?"mousedown":"click",function(){return n._trigger("cancel"),!1}),this.addEventListener("show",function(){s.css({opacity:0,background:e.backdropBackground}).animate({opacity:e.backdropOpacity},150)}),this._esc=function(e){var t=e.target,a=t.nodeName,s=/^input|textarea$/i,o=i.current===n,r=e.keyCode;!o||s.test(a)&&"button"!==t.type||27===r&&n._trigger("cancel")},t(document).on("keydown",this._esc),this.addEventListener("remove",function(){t(document).off("keydown",this._esc),delete u.list[this.id]}),o++,u.oncreate(this),this},u.create.prototype=m,t.extend(m,{content:function(e){var i=this._$("content");return"object"==typeof e?(e=t(e),i.empty("").append(e.show()),this.addEventListener("beforeremove",function(){t("body").append(e.hide())})):i.html(e),this.reset()},title:function(e){return this._$("title").text(e),this._$("header")[e?"show":"hide"](),this},width:function(e){return this._$("content").css("width",e),this.reset()},height:function(e){return this._$("content").css("height",e),this.reset()},button:function(e){e=e||[];var i=this,n="",a=0;return this.callbacks={},"string"==typeof e?(n=e,a++):t.each(e,function(e,s){var o=s.id=s.id||s.value,r="";i.callbacks[o]=s.callback,s.display===!1?r=' style="display:none"':a++,n+='<button type="button" i-id="'+o+'"'+r+(s.disabled?" disabled":"")+(s.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+s.value+"</button>",i._$("button").on("click","[i-id="+o+"]",function(e){var n=t(this);n.attr("disabled")||i._trigger(o),e.preventDefault()})}),this._$("button").html(n),this._$("footer")[a?"show":"hide"](),this},statusbar:function(e){return this._$("statusbar").html(e)[e?"show":"hide"](),this},_$:function(e){return this._popup.find("[i="+e+"]")},_trigger:function(e){var t=this.callbacks[e];return"function"!=typeof t||t.call(this)!==!1?this.close().remove():this}}),u.oncreate=t.noop,u.getCurrent=function(){return i.current},u.get=function(e){return void 0===e?u.list:u.list[e]},u.list={},u.defaults=n,u}),window.dialog=e("dialog")}()},function(e,t,i){var n,a,s,o,r=i(13);a=function(e,t,i,n){var a=Math.floor((t-e)/1e3)-1,s=setInterval(function(){a<=0?(n&&n(),clearInterval(s)):i&&i(a),a--},1e3);return s},o=function(e){var t,i={store:"http://store.meizu.com/member/login.htm?",mall:"http://mall.meizu.com/member/login.html?"},n="https://login.flyme.cn/vCodeLogin?";return e=e||"store",t={useruri:i[e]+"useruri="+location.href,service:"store",sid:"unionlogin",autodirct:!0},n+r.param(t)},n=function(e){var t=o(e);location.href=t},s=function(e,t,i,n){var a=r.Deferred();return r.ajax({url:e,data:t||null,type:i||"get",dataType:n||"jsonp",timeout:4e3,cache:!1}).done(function(e){e.success?a.resolve(e.data):a.reject(e)}).fail(function(){a.reject("网络异常，请稍后再试!")}),a.promise()},e.exports={ajax:s,login:n,getLoginUrl:o,countDown:a}},function(e,t,i){var n=i(13),a=i(23),s=i(29),o={promoInner:n("#J_promoInner"),discountCouponList:n("#J_discountCoupon")},r={remoteURL:{getCouponList:"//promotion.meizu.com/coupon/item/list/",getCoupon:"//promotion.meizu.com/coupon/acquire/"},init:function(e){var t=this;t.getCoupon(e),t.bindEvent()},bindEvent:function(){var e=this;n("#J_promoInner,#J_promoMore").on("click",function(){n("#layerPromo").fadeIn(100)}),n("#J_discountCoupon").on("click",".vm-btn",function(t){var i=n(t.currentTarget),a=i.data("key");i.hasClass("disabled")||(e.ajax(e.remoteURL.getCoupon+a,null,"get","jsonp").done(function(){e.artAlert("您已领取成功，已领取的优惠券可在会员中心我的优惠券进行查看！")}).fail(function(t){401===t.code?e.artAlert("请先登录!"):e.artAlert(t.message)}),t.preventDefault(),t.stopPropagation(),i.addClass("disabled"),window.setTimeout(function(){i.removeClass("disabled")},1e3))}),n("#J_promoClose").on("click",function(){n("#layerPromo").fadeOut(200)})},getCoupon:function(e){var t=this,i=t.remoteURL.getCouponList+e;t.ajax(i,{scope:3},"get","jsonp").done(function(e){e&&e.length&&(e=t.formatData(e),t.renderCoupon(e))})},formatData:function(e){var t=function(e){var t=new Date(e),i=t.getFullYear(),n=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate(),s=t.getHours()<10?"0"+t.getHours():t.getHours(),o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();return i+"."+n+"."+a+" "+s+":"+o};return n.each(e,function(e,i){i.start=t(i.start),i.end=t(i.end)}),e},renderCoupon:function(e){var t,i,r="";e&&(n.each(e,function(e,t){if(r+=1===t.couponType?'<span class="vm-tag">满'+parseInt(t.consumptionQuota,10)+"减"+parseInt(t.reductionQuota,10)+"</span>":'<span class="vm-tag multiple">满'+parseInt(t.consumptionQuota,10)+"减"+parseInt(t.reductionQuota,10)+"</span>",2===e)return!1}),t=a.template(s),i=t({listData:e}),o.promoInner.append(r).parent().parent().slideDown(200),o.discountCouponList.append(i))},ajax:function(e,t,i,a){var s=n.Deferred();return n.ajax({url:e,type:i||"get",data:t||null,dataType:a||"json",timeout:4e3,cache:!1}).done(function(e){e.success?s.resolve(e.data):s.reject(e)}).fail(function(){s.reject("网络异常，请稍后再试!")}),s.promise()},artAlert:function(e){var t=this,i='<div class="coupon-alert" id="couponAlert"><div class="coupon-alert-bd">'+e+"</div></div>";t.instance&&t.instance.remove(),t.instance=n(i).appendTo("#layerPromo").addClass("open"),setTimeout(function(){t.instance.remove()},2e3)}};e.exports=r},function(e,t){e.exports='<% for(var i = 0, length = listData.length; i < length; i++) { %>\n    <dd class="discount-coupon-item clearfix <% if (listData[i].couponType === 2) { %>multiple<% } %>">\n        <div class="mod-btn">\n            <a class="vm-btn" data-key="<%= listData[i].couponKey %>">立即领取</a>\n        </div>\n        <div class="mod-bd clearfix">\n            <p class="mod-bd-value">\n                <span class="vm-amount"><sup>¥</sup><%= listData[i].reductionQuota %></span>\n                <em>\n                <% if (listData[i].couponType === 1) { %>\n                (单品券)\n                <% } else { %>\n                (多品券)\n                <% } %>\n                </em>\n            </p>\n            <p class="mod-bd-name">\n                <span class="vm-name"><%= listData[i].couponName %>优惠券</span>\n                <span class="vm-claim">满<%= listData[i].consumptionQuota %>可用</span>\n            </p>\n            <p class="mod-bd-info">\n                <span><%= listData[i].start %> - <%= listData[i].end %></span>\n                <span class="vm-range ellipsis">适用范围：<%= listData[i].appliableDesc %></span>\n                <% if (listData[i].couponType === 2) { %>\n                <a class="vm-more" target="_blank" href="//lists.meizu.com/page/couponItems/<%= listData[i].couponGroupId %>.html">查看适用></a>\n                <% } %>\n            </p>\n        </div>\n    </dd>\n<% } %>'},function(e,t,i){var n=i(13),a=i(24).login,s={sort:[2911,14848,7450,8452,16860,1,16624,18482,21612,41143,42634,36793,15121,1214,27304,35714,34187,23366,20238,32166,11241,38498,21894,3251,10088,25024,25305,13289,25761,32939,5700],provinceAndCities:{2911:{id:2911,name:"北京",cities:[{id:2912,name:"北京市"}]},14848:{id:14848,name:"天津",cities:[{id:14849,name:"天津市"}]},7450:{id:7450,name:"吉林省",cities:[{id:7451,name:"长春市"},{id:7632,name:"吉林市"},{id:7787,name:"延边朝鲜族自治州"},{id:7901,name:"四平市"},{id:8011,name:"通化市"},{id:8117,name:"白城市"},{id:8222,name:"辽源市"},{id:8272,name:"松原市"},{id:8378,name:"白山市"}]},8452:{id:8452,name:"辽宁省",cities:[{id:8453,name:"大连市"},{id:8627,name:"丹东市"},{id:8724,name:"沈阳市"},{id:8951,name:"抚顺市"},{id:9043,name:"铁岭市"},{id:9156,name:"鞍山市"},{id:9277,name:"本溪市"},{id:9342,name:"锦州市"},{id:9465,name:"营口市"},{id:9544,name:"阜新市"},{id:9648,name:"辽阳市"},{id:9717,name:"朝阳市"},{id:9892,name:"盘锦市"},{id:9954,name:"葫芦岛市"}]},16860:{id:16860,name:"浙江省",cities:[{id:16861,name:"杭州市"},{id:17072,name:"湖州市"},{id:17146,name:"嘉兴市"},{id:17227,name:"衢州市"},{id:17343,name:"丽水市"},{id:17535,name:"金华市"},{id:17697,name:"宁波市"},{id:17861,name:"舟山市"},{id:17909,name:"绍兴市"},{id:18035,name:"台州市"},{id:18179,name:"温州市"}]},1:{id:1,name:"福建省",cities:[{id:2,name:"福州市"},{id:208,name:"宁德市"},{id:347,name:"三明市"},{id:502,name:"南平市"},{id:652,name:"莆田市"},{id:712,name:"泉州市"},{id:888,name:"厦门市"},{id:933,name:"漳州市"},{id:1073,name:"龙岩市"}]},16624:{id:16624,name:"上海",cities:[{id:16625,name:"上海市"}]},18482:{id:18482,name:"广东省",cities:[{id:18483,name:"汕尾市"},{id:18547,name:"揭阳市"},{id:18641,name:"汕头市"},{id:18718,name:"潮州市"},{id:18773,name:"东莞市"},{id:18807,name:"佛山市"},{id:18846,name:"肇庆市"},{id:18964,name:"云浮市"},{id:19033,name:"广州市"},{id:19209,name:"韶关市"},{id:19327,name:"清远市"},{id:19422,name:"惠州市"},{id:19499,name:"梅州市"},{id:19622,name:"河源市"},{id:19729,name:"深圳市"},{id:19796,name:"阳江市"},{id:19848,name:"茂名市"},{id:19964,name:"江门市"},{id:20052,name:"湛江市"},{id:20184,name:"珠海市"},{id:20212,name:"中山市"}]},21612:{id:21612,name:"海南省",cities:[{id:21613,name:"海口市"},{id:21661,name:"琼海市"},{id:21675,name:"儋州市"},{id:21705,name:"文昌市"},{id:21724,name:"定安县"},{id:21736,name:"屯昌县"},{id:21746,name:"澄迈县"},{id:21759,name:"临高县"},{id:21771,name:"白沙黎族自治县"},{id:21784,name:"昌江黎族自治县"},{id:21794,name:"陵水黎族自治县"},{id:21807,name:"保亭黎族苗族自治县"},{id:21818,name:"琼中黎族苗族自治县"},{id:21830,name:"三亚市"},{id:21840,name:"五指山市"},{id:21849,name:"万宁市"},{id:21864,name:"东方市"},{id:21876,name:"乐东黎族自治县"},{id:21889,name:"三沙市"}]},41143:{id:41143,name:"湖北省",cities:[{id:41144,name:"武汉市"},{id:41336,name:"襄阳市"},{id:41457,name:"鄂州市"},{id:41486,name:"孝感市"},{id:41620,name:"黄冈市"},{id:41774,name:"黄石市"},{id:41835,name:"咸宁市"},{id:41919,name:"荆州市"},{id:42055,name:"宜昌市"},{id:42180,name:"恩施土家族苗族自治州"},{id:42280,name:"十堰市"},{id:42420,name:"神农架"},{id:42430,name:"随州市"},{id:42481,name:"荆门市"},{id:42555,name:"仙桃市"},{id:42579,name:"潜江市"},{id:42604,name:"天门市"}]},42634:{id:42634,name:"湖南省",cities:[{id:42635,name:"岳阳市"},{id:42835,name:"长沙市"},{id:43035,name:"湘潭市"},{id:43126,name:"株洲市"},{id:43271,name:"衡阳市"},{id:43509,name:"郴州市"
},{id:43728,name:"常德市"},{id:43978,name:"益阳市"},{id:44087,name:"娄底市"},{id:44190,name:"邵阳市"},{id:44427,name:"湘西土家族苗族自治州"},{id:44603,name:"张家界市"},{id:44713,name:"怀化市"},{id:45025,name:"永州市"}]},36793:{id:36793,name:"安徽省",cities:[{id:36794,name:"滁州市"},{id:36921,name:"合肥市"},{id:37075,name:"蚌埠市"},{id:37163,name:"芜湖市"},{id:37247,name:"淮南市"},{id:37321,name:"马鞍山市"},{id:37380,name:"安庆市"},{id:37567,name:"宿州市"},{id:37682,name:"阜阳市"},{id:37864,name:"亳州市"},{id:37960,name:"黄山市"},{id:38075,name:"淮北市"},{id:38116,name:"铜陵市"},{id:38150,name:"宣城市"},{id:38256,name:"六安市"},{id:38436,name:"池州市"}]},15121:{id:15121,name:"江苏省",cities:[{id:15122,name:"南京市"},{id:15238,name:"镇江市"},{id:15303,name:"扬州市"},{id:15406,name:"南通市"},{id:15534,name:"泰州市"},{id:15644,name:"盐城市"},{id:15794,name:"徐州市"},{id:15973,name:"淮安市"},{id:16129,name:"连云港市"},{id:16230,name:"宿迁市"},{id:16352,name:"苏州市"},{id:16469,name:"无锡市"},{id:16558,name:"常州市"}]},1214:{id:1214,name:"江西省",cities:[{id:1215,name:"鹰潭市"},{id:1261,name:"新余市"},{id:1295,name:"南昌市"},{id:1428,name:"九江市"},{id:1642,name:"上饶市"},{id:1862,name:"抚州市"},{id:2039,name:"宜春市"},{id:2244,name:"吉安市"},{id:2482,name:"赣州市"},{id:2792,name:"景德镇市"},{id:2850,name:"萍乡市"}]},27304:{id:27304,name:"四川省",cities:[{id:27305,name:"成都市"},{id:27640,name:"眉山市"},{id:27778,name:"资阳市"},{id:27959,name:"攀枝花市"},{id:28025,name:"自贡市"},{id:28140,name:"绵阳市"},{id:28443,name:"南充市"},{id:28870,name:"达州市"},{id:29192,name:"遂宁市"},{id:29316,name:"广安市"},{id:29504,name:"巴中市"},{id:29702,name:"泸州市"},{id:29852,name:"宜宾市"},{id:30049,name:"内江市"},{id:30176,name:"乐山市"},{id:30407,name:"凉山彝族自治州"},{id:31038,name:"雅安市"},{id:31200,name:"甘孜藏族自治州"},{id:31543,name:"阿坝藏族羌族自治州"},{id:31780,name:"德阳市"},{id:31914,name:"广元市"}]},35714:{id:35714,name:"重庆",cities:[{id:35715,name:"重庆市"}]},34187:{id:34187,name:"云南省",cities:[{id:34188,name:"怒江傈僳族自治州"},{id:34222,name:"丽江市"},{id:34291,name:"西双版纳傣族自治州"},{id:34330,name:"德宏傣族景颇族自治州"},{id:34388,name:"昭通市"},{id:34543,name:"昆明市"},{id:34696,name:"大理白族自治州"},{id:34821,name:"红河哈尼族彝族自治州"},{id:34968,name:"曲靖市"},{id:35093,name:"保山市"},{id:35171,name:"文山壮族苗族自治州"},{id:35282,name:"玉溪市"},{id:35367,name:"楚雄彝族自治州"},{id:35481,name:"普洱市"},{id:35595,name:"临沧市"},{id:35681,name:"迪庆藏族自治州"}]},23366:{id:23366,name:"贵州省",cities:[{id:23367,name:"遵义市"},{id:23625,name:"安顺市"},{id:23719,name:"贵阳市"},{id:23856,name:"黔南布依族苗族自治州"},{id:24109,name:"黔东南苗族侗族自治州"},{id:24335,name:"铜仁市"},{id:24515,name:"毕节市"},{id:24776,name:"六盘水市"},{id:24879,name:"黔西南布依族苗族自治州"}]},20238:{id:20238,name:"广西壮族自治区",cities:[{id:20239,name:"防城港市"},{id:20271,name:"南宁市"},{id:20410,name:"崇左市"},{id:20494,name:"柳州市"},{id:20621,name:"来宾市"},{id:20698,name:"桂林市"},{id:20862,name:"梧州市"},{id:20936,name:"贺州市"},{id:21003,name:"贵港市"},{id:21083,name:"玉林市"},{id:21200,name:"百色市"},{id:21348,name:"钦州市"},{id:21426,name:"河池市"},{id:21577,name:"北海市"}]},32166:{id:32166,name:"西藏自治区",cities:[{id:32167,name:"拉萨市"},{id:32241,name:"日喀则地区"},{id:32463,name:"山南地区"},{id:32558,name:"林芝地区"},{id:32620,name:"昌都地区"},{id:32770,name:"那曲地区"},{id:32895,name:"阿里地区"}]},11241:{id:11241,name:"山东省",cities:[{id:11242,name:"菏泽市"},{id:11420,name:"济南市"},{id:11560,name:"淄博市"},{id:11679,name:"德州市"},{id:11825,name:"济宁市"},{id:11994,name:"泰安市"},{id:12087,name:"滨州市"},{id:12186,name:"东营市"},{id:12234,name:"莱芜市"},{id:12257,name:"聊城市"},{id:12401,name:"青岛市"},{id:12584,name:"临沂市"},{id:12777,name:"枣庄市"},{id:12848,name:"日照市"},{id:12909,name:"烟台市"},{id:13078,name:"潍坊市"},{id:13210,name:"威海市"}]},38498:{id:38498,name:"河南省",cities:[{id:38499,name:"商丘市"},{id:38699,name:"郑州市"},{id:38899,name:"安阳市"},{id:39045,name:"新乡市"},{id:39213,name:"许昌市"},{id:39321,name:"平顶山市"},{id:39476,name:"信阳市"},{id:39698,name:"南阳市"},{id:39950,name:"开封市"},{id:40085,name:"洛阳市"},{id:40292,name:"焦作市"},{id:40407,name:"济源市"},{id:40425,name:"鹤壁市"},{id:40474,name:"濮阳市"},{id:40570,name:"周口市"},{id:40787,name:"漯河市"},{id:40848,name:"驻马店市"},{id:41056,name:"三门峡市"}]},21894:{id:21894,name:"甘肃省",cities:[{id:21895,name:"临夏回族自治州"},{id:22034,name:"兰州市"},{id:22160,name:"定西市"},{id:22289,name:"平凉市"},{id:22412,name:"庆阳市"},{id:22541,name:"金昌市"},{id:22562,name:"武威市"},{id:22668,name:"张掖市"},{id:22741,name:"嘉峪关市"},{id:22753,name:"酒泉市"},{id:22839,name:"天水市"},{id:22970,name:"陇南市"},{id:23174,name:"甘南藏族自治州"},{id:23282,name:"白银市"}]},3251:{id:3251,name:"河北省",cities:[{id:3252,name:"张家口市"},{id:3507,name:"承德市"},{id:3734,name:"邯郸市"},{id:3996,name:"石家庄市"},{id:4296,name:"保定市"},{id:4663,name:"衡水市"},{id:4796,name:"邢台市"},{id:5012,name:"唐山市"},{id:5268,name:"廊坊市"},{id:5387,name:"沧州市"},{id:5595,name:"秦皇岛市"}]},10088:{id:10088,name:"内蒙古自治区",cities:[{id:10089,name:"赤峰市"},{id:10260,name:"呼伦贝尔市"},{id:10391,name:"兴安盟"},{id:10455,name:"呼和浩特市"},{id:10549,name:"包头市"},{id:10650,name:"乌海市"},{id:10676,name:"乌兰察布市"},{id:10793,name:"鄂尔多斯市"},{id:10881,name:"巴彦淖尔市"},{id:10973,name:"锡林郭勒盟"},{id:11071,name:"阿拉善盟"},{id:11110,name:"通辽市"}]},25024:{id:25024,name:"宁夏回族自治区",cities:[{id:25025,name:"银川市"},{id:25089,name:"石嘴山市"},{id:25130,name:"吴忠市"},{id:25186,name:"固原市"},{id:25258,name:"中卫市"}]},25305:{id:25305,name:"青海省",cities:[{id:25306,name:"海北藏族自治州"},{id:25342,name:"西宁市"},{id:25422,name:"海东市"},{id:25523,name:"黄南藏族自治州"},{id:25560,name:"海南藏族自治州"},{id:25603,name:"果洛藏族自治州"},{id:25654,name:"玉树藏族自治州"},{id:25707,name:"海西蒙古族藏族自治州"}]},13289:{id:13289,name:"山西省",cities:[{id:13290,name:"朔州市"},{id:13374,name:"忻州市"},{id:13581,name:"太原市"},{id:13697,name:"大同市"},{id:13852,name:"阳泉市"},{id:13903,name:"晋中市"},{id:14056,name:"长治市"},{id:14223,name:"晋城市"},{id:14317,name:"临汾市"},{id:14507,name:"吕梁市"},{id:14683,name:"运城市"}]},25761:{id:25761,name:"陕西省",cities:[{id:25762,name:"西安市"},{id:25952,name:"咸阳市"},{id:26124,name:"延安市"},{id:26264,name:"榆林市"},{id:26462,name:"渭南市"},{id:26618,name:"商洛市"},{id:26752,name:"安康市"},{id:26924,name:"汉中市"},{id:27125,name:"宝鸡市"},{id:27259,name:"铜川市"}]},32939:{id:32939,name:"新疆维吾尔自治区",cities:[{id:32940,name:"塔城地区"},{id:33052,name:"哈密地区"},{id:33108,name:"和田地区"},{id:33216,name:"阿勒泰地区"},{id:33284,name:"克孜勒苏柯尔克孜自治州"},{id:33328,name:"博尔塔拉蒙古自治州"},{id:33357,name:"克拉玛依市"},{id:33380,name:"乌鲁木齐市"},{id:33482,name:"石河子市"},{id:33492,name:"昌吉回族自治州"},{id:33580,name:"五家渠市"},{id:33588,name:"吐鲁番地区"},{id:33625,name:"巴音郭楞蒙古自治州"},{id:33726,name:"阿克苏地区"},{id:33843,name:"阿拉尔市"},{id:33861,name:"喀什地区"},{id:34045,name:"图木舒克市"},{id:34056,name:"伊犁哈萨克自治州"}]},5700:{id:5700,name:"黑龙江省",cities:[{id:5701,name:"哈尔滨市"},{id:6019,name:"齐齐哈尔市"},{id:6224,name:"牡丹江市"},{id:6325,name:"佳木斯市"},{id:6445,name:"绥化市"},{id:6659,name:"黑河市"},{id:6759,name:"大兴安岭地区"},{id:6811,name:"伊春市"},{id:7023,name:"大庆市"},{id:7124,name:"七台河市"},{id:7174,name:"鸡西市"},{id:7302,name:"鹤岗市"},{id:7368,name:"双鸭山市"}]}}},o={site:n("#site-selector"),status:n("#J_siteStatus")},r={getDefaultSite:"//me.meizu.com/vip/address/default_new_address",queryChildren:"//area.meizu.com/area/child/batch_query",fastArrival:"//detail.meizu.com/api/sku/check_fast_arrival",ipLocate:"//detail.meizu.com/api/ip/locate_city"},c=function(e,t){this.liveView=e,this.model=e.model,this.supportFastArrival=t,this.props={cities:s.provinceAndCities,provinceSet:null,origin:{province:"广东",provinceId:18482,city:"广州市",cityId:19033},userSite:{},activeSite:{}},this.init()};c.prototype.init=function(){var e=this,t=e.liveView,i=e.model.get("isPackage");e.packageProvince(),e.buildBaseHTML(),e.bindEvent(),t.listenTo(t.model,"change:skuId",e.handlerDelivery.bind(e)),i&&t.listenTo(t.model,"change:packageSkuIds",e.queryFastArrival.bind(e)),e.getDefaultSite().done(function(t){e.props.userSite=t,e.render(t),e.renderShowSite(),e.handlerDelivery()})},c.prototype.getDefaultSite=function(){var e=this,t=n.Deferred();return a.isLogin?e.ajax(r.getDefaultSite,null,"get","jsonp").done(function(e){t.resolve(e)}).fail(function(i){e.ipLocateCity().done(function(e){t.resolve({province:e.province,provinceId:e.provinceId,city:e.city,cityId:e.cityId})})}):e.ipLocateCity().done(function(e){t.resolve({province:e.province,provinceId:e.provinceId,city:e.city,cityId:e.cityId})}),t.promise()},c.prototype.ipLocateCity=function(){var e=this,t=n.Deferred();return e.ajax(r.ipLocate,null,"get","jsonp",!0).done(function(e){t.resolve(e.location)}).fail(function(i){t.resolve(e.props.origin)}),t.promise()},c.prototype.handlerDelivery=function(e){var t,i=this,e=i.model,a=e.get("isPreSale"),s="";a?(t=e.get("delaySendDayNum")||15,s='<a class="vm-sale" href="javascript:;"><i class="iconfont-detail icon-pre-sale"></i>预售商品</a><span class="vm-msg">付款后预计'+t+"天内发货</span>",n("#J_siteStatus").html(s)):(n("#J_siteStatus").empty(),i.queryFastArrival())},c.prototype.packageProvince=function(){var e,t=this,i=t.props.cities,a=[];n.each(s.sort,function(n,s){e=t.provinceShort(i[s]),a.push({id:e.id,name:e.name})}),t.props.provinceSet=a},c.prototype.buildBaseHTML=function(){var e='<div data-widget="tabs"class="m JD-stock"id="JD-stock"><div class="mt"><ul class="tab"><li data-index="0"data-widget="tab-item"class="curr"><a href="#none"><em></em><i></i></a></li><li data-index="1"data-widget="tab-item"style="display:none;"><a href="#none"><em></em><i></i></a></li><li data-index="2"data-widget="tab-item"style="display:none;"><a href="#none"><em></em><i></i></a></li><li data-index="3"data-widget="tab-item"style="display:none;"><a href="#none"><em></em><i></i></a></li></ul><div class="stock-line"></div></div><div class="mc"data-area="0"data-widget="tab-content"id="site-province-item"></div><div class="mc"data-area="1"data-widget="tab-content"id="site-city-item"></div><div class="mc"data-area="2"data-widget="tab-content"id="site-area-item"></div><div class="mc"data-area="3"data-widget="tab-content"id="site-town-item"></div></div>',t='<div class="JD-stock-con">'+e+'</div><span class="vm-close"></span>';o.content=o.site.find(".content"),o.content.html(t),o.show=o.site.find(".text"),o.tabs=o.site.find(".tab li"),o.panels=o.site.find(".mc")},c.prototype.provinceShort=function(e){var t;switch(e.id){case 32939:t="新疆";break;case 25024:t="宁夏";break;case 10088:t="内蒙古";break;case 20238:t="广西";break;case 32166:t="西藏";break;default:t=e.name.replace("省","")}return{id:e.id,name:t}},c.prototype.render=function(e){var t=this,i=e.provinceId,n=e.cityId,a=e.areaId,s=e.townId,c=[];if(o.panels.hide(),t.getAreaList(t.props.provinceSet,t.getIdNameByLevel(0)),t.props.cities[i]&&e.provinceId!==e.cityId&&t.getAreaList(t.props.cities[i].cities,t.getIdNameByLevel(1)),a&&s)o.panels.eq(3).show(),o.tabs.show().eq(3).addClass("curr").siblings().removeClass("curr"),c.push(n,a);else{if("origin"===e.type)return o.panels.eq(0).show(),void o.tabs.hide().first().show();o.panels.eq(2).show(),o.tabs.hide().filter(":lt(3)").show().last().addClass("curr").siblings().removeClass("curr"),c.push(n)}t.ajax(r.queryChildren,{parentIds:c.join(",")},"get","jsonp").done(function(e){e[n]&&t.getAreaList(e[n],t.getIdNameByLevel(2)),e[a]&&t.getAreaList(e[a],t.getIdNameByLevel(3))})},c.prototype.renderShowSite=function(){var e=this,t=[],i=(e.props.activeSite,e.props.userSite,e.props.activeSite[0]&&e.props.activeSite[0].name||e.props.userSite.province),n=e.props.activeSite[1]&&e.props.activeSite[1].name||e.props.userSite.city,a=e.props.activeSite[2]&&e.props.activeSite[2].name||e.props.userSite.area,s=e.props.activeSite[3]&&e.props.activeSite[3].name||e.props.userSite.town;n&&t.push(n),a?t.push(a):t.unshift(i),s&&t.push(s),t.push('<i class="iconfont-detail icon-yijianfankuixialajiantou"></i>'),o.show.html(t.join(" "))},c.prototype.getIdNameByLevel=function(e){var t="";switch(e){case 0:t="site-province-item";break;case 1:t="site-city-item";break;case 2:t="site-area-item";break;case 3:t="site-town-item"}return t},c.prototype.bindEvent=function(){var e,t=this;o.show.mouseover(function(){e=setTimeout(function(){o.site.addClass("hover")},200)}),o.site.mouseleave(function(){var t=n(this);t.hasClass("clicked")||t.removeClass("hover"),clearTimeout(e)}),o.site.on("click",".tab li",function(e){var t=n(this),i=t.index();t.addClass("curr").siblings().removeClass("curr"),o.panels.hide().eq(i).show(),e.preventDefault()}).on("click",".area-list a",function(e){var i=n(this),a=i.attr("data-value"),s=i.text(),r=i.parents(".mc").attr("data-area");o.tabs.eq(r).find("a").attr("title",s).find("em").html(s.length>6?s.substring(0,6)+"...":s),t.activeChildSite(r,a,s),e.preventDefault()}).on("click",".vm-close",function(){o.site.removeClass("hover clicked")})},c.prototype.activeChildSite=function(e,t,i){var n=this;n.props.activeSite[e]={id:t,name:i},e<3?(++e,n.ajax(r.queryChildren,{parentIds:t},"get","jsonp").done(function(i){n.getAreaList(i[t],n.getIdNameByLevel(e),!0),o.panels.hide().eq(e).show()}),o.site.addClass("clicked"),o.tabs.eq(e).show().addClass("curr").find("em").text("请选择"),o.tabs.eq(e).nextAll().hide().end().siblings().removeClass("curr")):(o.site.removeClass("hover clicked"),n.renderShowSite(),n.queryFastArrival())},c.prototype.getAreaList=function(e,t,i){var a=this,s=['<ul class="area-list">'],o=[],r=[],c=n("#"+t),d=c.data("area"),l="";if(e&&e.length){c.empty();for(var u=0,p=e.length;u<p;u++)e[u].name=e[u].name.replace(" ",""),e[u].name.length>12?r.push("<li class='longer-area'><a href='#none' data-value='"+e[u].id+"'>"+e[u].name+"</a></li>"):e[u].name.length>5?o.push("<li class='long-area'><a href='#none' data-value='"+e[u].id+"'>"+e[u].name+"</a></li>"):0===e[u].id?l="<li><a href='#none' data-value='"+e[u].id+"'>"+e[u].name+"</a></li>":s.push("<li><a href='#none' data-value='"+e[u].id+"'>"+e[u].name+"</a></li>");s.push(o.join("")),s.push(r.join("")),s.push(l),s.push("</ul>"),c.html(s.join("")),i||a.renderShowTab(d)}},c.prototype.renderShowTab=function(e){var t=this.props.userSite,i=["province","city","area","town"],n=t[i[e]]||"请选择";o.tabs.eq(e).find("a").attr("title",n).find("em").html(n.length>6?n.substring(0,6)+"...":n)},c.prototype.queryFastArrival=function(){var e=this,t=e.model,i=e.props.activeSite[0]&&e.props.activeSite[0].id||e.props.userSite.provinceId,a=e.props.activeSite[1]&&e.props.activeSite[1].id||e.props.userSite.cityId,s=e.props.activeSite[2]&&e.props.activeSite[2].id||e.props.userSite.areaId,o=e.props.activeSite[3]&&e.props.activeSite[3].id||e.props.userSite.townId,c=t.get("isPreSale"),d=t.get("quantity"),l=t.get("skuId"),u=t.get("packageSkuIds"),p=[];2===t.get("type");!c&&e.supportFastArrival&&l&&i&&a&&(p.push({id:e.model.get("skuId"),num:d}),u&&n.each(u,function(e,t){p.push({id:t,num:d})}),e.ajax(r.fastArrival,{provinceId:i,cityId:a,areaId:s,townId:o,skus:JSON.stringify(p),type:1},"get","jsonp").done(function(e){var t="",i="",a=new Date(e.arrivalDate||0);1===e.fastArrivalStatus?(t+='<a class="vm-today" href="//store.meizu.com/marrive/summary.html" target="_blank"><i class="iconfont-detail icon-delivery"></i>当日达</a>',t+="<span>"+e.payTime+" 前下单并支付，预计今天送达</span>"):2===e.fastArrivalStatus?(i="明天（"+(a.getMonth()+1)+"月"+a.getDate()+"日）",t+='<a class="vm-today" href="//store.meizu.com/marrive/summary.html" target="_blank"><i class="iconfont-detail icon-delivery"></i>次日达</a>',t+="<span>"+e.payTime+" 前下单并支付，预计"+i+"送达</span>"):3===e.fastArrivalStatus?(i="后天（"+(a.getMonth()+1)+"月"+a.getDate()+"日）",t="<span>"+e.payTime+" 前下单并支付，预计"+i+"送达</span>"):0===e.fastArrivalStatus&&1===e.fastArrivalEnable?t="<span>"+e.payTime+" 前付款，当天发货</span>":0===e.fastArrivalStatus&&2===e.fastArrivalEnable&&(t="<span>付款后24h内快速发货</span>"),n("#J_siteStatus").html(t)}))},c.prototype.ajax=function(e,t,i,a,s){var o=n.Deferred(),r={url:e,type:i?i:"get",data:t?t:null,dataType:a?a:"json",timeout:4e3,cache:s||!1};return s&&(r.jsonpCallback="ipLocateCallback"),n.ajax(r).done(function(e){e.success||200===e.code&&e.data?o.resolve(e.data):o.reject(e.message)}).fail(function(){o.reject("请求失败")}),o.promise()},e.exports=window._Site=c},function(e,t,i){function n(e,t){this.liveView=e,this.model=e.model,this.itemId=t,this.init()}var a=i(13),s=i(27),o={prodGift:a("#J_prodGift")},r={getGift:"//promotion.meizu.com/present/get"};n.prototype.init=function(){var e=this;e.getGift()},n.prototype.getGift=function(){var e=this;s.ajax(r.getGift,{itemId:e.itemId},"get","jsonp").done(function(t){t&&t.length&&e.giftHandler(t)})},n.prototype.giftHandler=function(e){var t=e.some(function(e){return 1===e.type});t&&this.model.set("hasGiftCard",!0);var i=e.reduce(function(e,t){return e.push(t.showName),e},[]);o.prodGift.find("dd").text(i.join("、")),o.prodGift.slideDown(600)},e.exports=window._Gift=n},function(e,t,i){function n(e,t){this.liveView=e,this.model=e.model,this.itemId=t,this.init()}var a=i(24).moreBuy,s=i(13),o=i(27),r={morebuy:s("#J_moreBuy"),moreBuyStart:s("#J_moreBuyStart"),prodMorebuy:s("#J_prodMorebuy"),moreBuyEnter:s("#J_moreBuyEnter")},c={getMorebuy:"//detail.meizu.com/addprice/get"};n.prototype.init=function(){var e=this;e.bindEvent(),e.getMorebuy()},n.prototype.bindEvent=function(){var e=this,t=e.model,i={itemId:e.itemId,skuId:t.get("skuId"),quantity:1,packageId:"",packageSkuIds:null,refer:"detail"};r.moreBuyEnter.on("click",function(e){e.preventDefault(),i.skuId=t.get("skuId"),i.quantity=t.get("quantity"),(t.get("activePackage")||0===t.get("activePackage"))&&(i.packageId=t.get("activePackage")),t.get("packageSkuIds")&&(i.packageSkuIds=t.get("packageSkuIds").join(",")),a.init(i)})},n.prototype.getMorebuy=function(){var e=this;o.ajax(c.getMorebuy,{skuId:e.model.get("skuId")},"get","jsonp").done(function(t){t&&t.length&&e.renderMorebuy(t)})},n.prototype.renderMorebuy=function(e){var t=e.reduce(function(e,t){return e.minPrice<t.minPrice?e:t});r.moreBuyStart.text(Number(t.minPrice)),r.prodMorebuy.slideDown(600)},e.exports=window._Morebuy=n},function(e,t,i){function n(){c.init()}var a=i(13),s=i(27),o=i(34),r=window.MZ,c={remoteURL:{addFavorite:"//me.meizu.com/vip/favorite"},init:function(){var e=this;e.showTips(),e.bindEvent()},showTips:function(){localStorage&&"false"!==localStorage.getItem("global_favorite")&&a("#J_favoriteTips").show()},bindEvent:function(){var e=this;a("#J_favorite").on("click",function(t){var i=r.modelData.itemId;s.ajax(e.remoteURL.addFavorite,{itemId:i}).done(function(e){new o(1===e?{message:"收藏成功"}:{type:"warning",message:"您已收藏过该商品"})}).fail(function(e){new o(401===e.code?{type:"error",message:"请先登录",addLink:"//me.meizu.com/member/favorite/index",addLinkText:"查看我的收藏"}:{type:"warning",message:e.message})}),t.preventDefault(),t.stopPropagation()}),a("#J_favoriteTipsClose").on("click",function(e){var t=a(e.currentTarget);t.parent().fadeOut(100),localStorage&&localStorage.setItem("global_favorite","false")})}};window._Favorite=c,e.exports=n},function(e,t,i){var n=i(13),a=i(23),s=i(35);i(26);var o=window.dialog,r={type:"success",message:"",tips:"",addLink:"",addLinkText:"",delay:3e3},c=function(e){this.opts=n.extend({},r,e),this.tmplCompiled=a.template(s),this.artAlert()};c.prototype.artAlert=function(){var e,t=this.opts,i=this.tmplCompiled(t);o.get("artAlert")&&o.get("artAlert").remove(),e=o({id:"artAlert",width:360,content:i,backdropOpacity:.5,onshow:function(){var e=this;n(e.node).on("click",".J_alertClose",function(){e.remove()}),setTimeout(function(){e.remove()},t.delay)}}),"confirm"===t.type?e.showModal():e.show()},e.exports=window._Alert=c},function(e,t){e.exports='<div class="bi-alert <%=type%>">\n    <div class="bi-alert-bd">\n        <% if (type === \'confirm\') { %>\n            <p class="mod-message">\n                <span><%=message%></span>\n            </p>\n            <p class="mod-tips"><%=tips%></p>\n            <p class="mod-action">\n                <a class="vm-cart" href="//cart.meizu.com">去购物车</a>\n                <a class="vm-know J_alertClose" href="javascript:;">知道了</a>\n            </p>\n        <% } else { %>\n            <p class="mod-message">\n                <span><i class="iconfont icon-<%=type%>"></i><%=message%></span>\n            </p>\n            <% if (tips) { %>\n            <p class="mod-tips"><%-tips%></p>\n            <% } %>\n            <% if (addLink && addLinkText) { %>\n            <a class="mod-link" target="_blank" href="<%=addLink%>"><%=addLinkText%></a>\n            <% } %>\n        <% } %>\n    </div>\n    <a class="bi-alert-close J_alertClose" href="javascript:;">\n        <i class="iconfont icon-chahao"></i>\n    </a>\n</div>\n'},function(e,t){t.conversionSkuKeyToObj=function(e){var t,i={},n=e.split("+")[0];return n.split(";").forEach(function(e){t=e.split(":"),i[t[0]]=e}),i},t.queryString=function(e){var t=location.search.match(new RegExp("[?&]"+e+"=([^&]*)(&?)","i"));return t?t[1]:""}},function(e,t,i){function n(e){if(e&&e.length)return e=e.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0})}var a=i(13);t.lineRecommendPvs=function(e,t){var i=this,s=i.model.get("propItem"),o=i.collection,r={done:!1,stockPvs:"",noStockPvs:""};return r.done=s.some(function(i,s){if(s>e){var c,d=a.extend({},t);if(delete d[i],c=o.where(d),c&&c.length)return c=n(c),c.some(function(e){var t=e.get("stock");return r.noStockPvs||(r.noStockPvs=e.id),t&&(r.done=!0,r.stockPvs=e.id),1===t})}return!1}),r},t.pointRecommendPvs=function(e,t){var i,a=this,s=a.model.get("propItem"),o=a.collection,r={done:!1,stockPvs:"",noStockPvs:""};return s.reduce(function(t,i){return i!=e&&delete t[i],t},t),i=o.where(t),i&&i.length&&(i=n(i),r.done=i.some(function(e){var t=e.get("stock");return r.noStockPvs||(r.noStockPvs=e.id),t&&(r.done=!0,r.stockPvs=e.id),1===t})),r}},function(e,t,i){var n=i(13),a=i(27),s=i(24).login,o=window.MZ.modelData,r={serverTime:n("#servertime"),btnBuy:n("#J_btnBuy"),btnRemind:n("#J_btnRemind"),panicBuyingWrap:n("#J_panicBuyingWrap")},c={getSaleStatus:"//detail.meizu.com/api/sku/sale_status",getService:"//detail.meizu.com/api/timestamp"},d=function(e){this.liveView=e,this.model=e.model,this.init(),this.handlerSoonSale(this.model)};d.prototype.init=function(){var e=this;e.liveView.listenTo(e.liveView.model,"change:skuId",e.handlerSoonSale.bind(e))},d.prototype.handlerSoonSale=function(e){var t=this,i=e.get("type"),n=!e.previous("skuId");switch(r.panicBuyingWrap.html(""),r.btnBuy.css("display","inline-block"),i){case 1:t.handlerGeneral(n);break;case 2:t.handlerPanicBuying(n)}},d.prototype.getServerTime=function(){var e=n.Deferred();return n.ajax({url:c.getService,type:"get",dataType:"json",timeout:4e3,cache:!1}).done(function(t){t.success?e.resolve(t.data):e.reject(t)}).fail(function(){e.reject("网络异常，请稍后再试!")}),e.promise()},d.prototype.handlerGeneral=function(e){var t,i=this,n=i.model,a=n.get("activeStatus"),s=n.get("stock"),c=n.get("buyButton"),d=n.get("shipping")||0,l=n.get("total"),u=n.get("isPreSale");1===a&&s>0&&(u||1!==o.merchantId||1==o.merchantId&&l>=d)?r.btnBuy.text("立即购买").css("display","inline-block").removeClass("disabled"):1===a&&s>0&&1==o.merchantId&&l<d?r.btnBuy.hide():1===a&&s<=0?r.btnBuy.text(c).addClass("disabled"):2===a?e?(r.btnBuy.text("即将发售").addClass("disabled"),i.waitingTimeToString()):i.getServerTime().done(function(e){t=i.waitingTimeToString(e),t&&(1!==o.merchantId||1==o.merchantId&&l>=d)?(r.btnBuy.text("立即购买").removeClass("disabled").css("display","inline-block"),r.btnRemind.hide()):t&&1==o.merchantId&&l<d?r.btnBuy.hide():r.btnBuy.text("即将发售").addClass("disabled")}):3===a&&r.btnBuy.text("已下架").addClass("disabled")},d.prototype.handlerPanicBuying=function(e){var t,i=this,n=i.model,a=i.liveView,s=n.get("activeStatus");1===s?(r.btnBuy.text("立即抢购").removeClass("disabled"),a.panicBuyingStockStatus()):2===s?e?(r.btnBuy.text("即将开始抢购").addClass("disabled"),i.waitingTimeToString()):i.getServerTime().done(function(e){t=i.waitingTimeToString(e),t?(r.btnBuy.text("立即抢购").removeClass("disabled").show(),r.btnRemind.hide(),n.set("activeStatus",1),a.panicBuyingStockStatus()):r.btnBuy.text("即将开始抢购").addClass("disabled")}):3===s&&r.btnBuy.text("活动已结束").addClass("disabled")},d.prototype.waitingTimeToString=function(e){var t,i=this,n=i.model,o=e||Number(r.serverTime.val()),c=n.get("shelveTime"),d=2===n.get("type"),l=i.getWaitingTime(o),u=d?i.countDownDoPanicBuying:i.countDownDoBuying,p=!1,m=[];return t=Math.ceil((c-o)/1e3),i.timer&&clearInterval(i.timer),t>86400?m.push('&nbsp;<em id="J_panicBuyingCountDown">'+l+"</em> "):t>0?(m.push('距开售还剩 <em id="J_panicBuyingCountDown">'+l+"</em> "),d&&!s.isLogin&&m.push("请预先登录账号"),i.timer=a.countDown(o,c,i.syncShelveTime.bind(i),u.bind(i))):t<=0&&(p=!0),r.panicBuyingWrap.html(m.join("，")),p},d.prototype.syncShelveTime=function(e){var t=this.formatDate(e);n("#J_panicBuyingCountDown").text(t)},d.prototype.formatDate=function(e){var t=Math.floor(e%86400/3600),i=Math.floor(e%3600/60)<10?"0"+Math.floor(e%3600/60):Math.floor(e%3600/60),n=e%60<10?"0"+e%60:e%60;return t+"时"+i+"分"+n+"秒"},d.prototype.getShowTime=function(e,t){var i,n=new Date;return n.setTime(e),i=n.getMonth()+1+"月"+n.getDate()+"日 "+(n.getHours()>=10?n.getHours():"0"+n.getHours())+":"+(n.getMinutes()>=10?n.getMinutes():"0"+n.getMinutes()),"next"===t?i="下次开售："+i:i+=" 准时开售",i},d.prototype.getWaitingTime=function(e,t){var i,n,a=this,s=a.model.get("shelveTime"),o=e||Number(r.serverTime.val());return t=t||0,i=Math.floor((s-o)/1e3)-t,n=!(i<0)&&(i<86400?a.formatDate(i):a.getShowTime(s))},d.prototype.countDownDoBuying=function(){var e=this,t=e.model;t.set("activeStatus",1),r.btnBuy.text("立即购买").removeClass("disabled").show(),r.btnRemind.hide(),r.panicBuyingWrap.empty()},d.prototype.countDownDoPanicBuying=function(){var e=this,t=e.model;t.set("activeStatus",1),s.isLogin?(r.btnBuy.text("立即抢购").removeClass("disabled").show(),r.btnRemind.hide()):r.btnBuy.text("请先登录").removeClass("disabled").addClass("notlogin").show(),r.panicBuyingWrap.empty()},e.exports=window._Snapup=d},function(e,t,i){var n=i(13),a=i(34),s=i(27),o=i(24).cartInterface,r=i(24).login,c="//cart.meizu.com/",d={btnAddCart:n("#J_btnAddCart")},l=function(){this.init()};l.prototype.init=function(){var e=this,t=window.livePropertyView;e.bindEvent(),t.listenTo(t.model,"change:skuId",e.syncShow.bind(t)),e.syncShow.call(t)},l.prototype.syncShow=function(){var e=this,t=e.model,i=t.get("isSupportCart"),n=t.get("stock"),a=t.get("activeStatus"),s=1===t.get("type")&&1===t.get("activeStatus");return s&&i?void(1===a&&n>0?d.btnAddCart.css("display","inline-block"):d.btnAddCart.css("display","none")):void d.btnAddCart.hide()},l.prototype.bindEvent=function(){var e=this;d.btnAddCart.on("click",function(){var t=window.livePropertyView.model,i=t.toJSON(),n={skuId:i.skuId,quantity:i.quantity,packageId:i.activePackage,packageSkuIds:i.packageSkuIds?i.packageSkuIds.join(","):""};MeizuBH({mzSku:n.skuId}),o.add(n,e.handlerCartResult.bind(e))})},l.prototype.handlerCartResult=function(e,t,i){var n=this;!e&&t&&i?n.addCartSuccess(t,i):n.addCartrror(e,i)},l.prototype.addCartSuccess=function(e,t){var i={type:"success",message:"已成功加入购物车",tips:"",addLink:"",addLinkText:""};t.data.reachHalf?(i.type="confirm",i.tips="您购物车中的商品已满50种，当购物车超出上限时，<br>您最早加入的商品将会被清除，建议您先去结算哦~"):r.isLogin?(i.addLink=c,i.addLinkText="去购物车结算 >"):r.isLogin||(i.tips="登录后可显示您账号中已加入的商品哦~",i.addLink=s.getLoginUrl("store"),i.addLinkText="去登录 >"),i.id="alertCart",new a(i)},l.prototype.addCartrror=function(e,t){var i={type:"",message:"",tips:"",addLink:"",addLinkText:""};if(t)switch(t.code){case 1003:i.type="warning",i.message="购物车已满",i.tips="请先去购物车结算或整理",i.addLink=c,i.addLinkText="去购物车整理 >";break;case 1007:i.type="warning",i.message="来晚了！已经没货了~";break;default:i.type="error",i.message=e}else i.type="error",i.message="加入失败";i.id="alertCart",new a(i),!t||1006!==t.code&&1007!==t.code||setTimeout(function(){location.reload()},2e3)},e.exports=window._Cart=l},function(e,t,i){i(41),i(42),i(43);var n=i(49),a=i(13),s=[],o=[],r={remoteHost:{addCompare:"//detail.meizu.com"},collectBar:{hasItems:a(".tab-con .diff-items"),hasItem:a(".hasItem")},romanceList:function(){var e,t=a.cookie("MEIZU_STORE_COMPARE_IDS");t&&(e=t.split("-")),a(".goods-list-wrap").find(".compare-btn-list").each(function(){var t=a(this);t.parent().find("a dd").each(function(){for(var i in e)a(this).attr("data-skuid")===e[i]&&(t.css("display","block"),t.parent().unbind("mouseenter").unbind("mouseleave"))})})},bindEvent:function(){function e(e){if(u.collectBar.hasItems.children().eq(e).remove(),a("#barNum").text(a("#diffBar").find(".item-full").length),0===a(".tab-con").find(".item-full").length){a("#diffOperate").css("display","none");var t="";t+='<div class="compare-clear-hint">您还没有选择需要对比的商品哦～</div>',a("#tabCon").append(t)}o=u.getSkuId(s)}function t(e,t,i){a.inArray(e,t)===-1||a("#compareBar").is(":hidden")?a.ajax({url:u.remoteHost.addCompare+"/compare/view",type:"get",data:{skuId:e},dataType:"jsonp",jsonp:"callback"}).done(function(e){a("#compareBar").show(),r(e,i)}).fail(function(){n.compareDia("系统繁忙，请稍后再试～","")}):n.compareDia("该商品已经添加过了哦～","")}function i(){var e=a(".tab-con").find(".item-full").length;if(e)a("#diffOperate").css("display","block"),a(".tab-con").find(".compare-clear-hint").remove();else{a("#diffOperate").css("display","none");var t="";t+='<div class="compare-clear-hint">您还没有选择需要对比的商品哦～</div>',a("#tabCon").append(t)}}function r(e,t){if(e.success){if(t.addClass("hasView"),s=e.data,d(),o=u.getSkuId(s),a("#barNum").text(a("#diffBar").find(".item-full").length),i(),"lists.meizu.com"!==p||e.errorCode||t.parent().unbind("mouseenter").unbind("mouseleave"),11001===e.errorCode)n.compareDia("该商品已经添加过了哦～","");else if(11002===e.errorCode)n.compareDia("您最多只能同时对比4款商品哦～","");else if(11004===e.errorCode)n.compareDia("不能添加未启用的商品哦～",""),window.location.reload();else if(11005===e.errorCode)n.compareDia("该商品不存在哦～","");else if(11006===e.errorCode){var r=e.errorMsg,l='请选择类别为 "'+r+'" 的商品加入';n.compareDia("不同类别的产品无法加入对比哦～",l)}}else c(e)}function c(e){if(11001===e.errorCode)n.compareDia("该商品已经添加过了哦～","");else if(11002===e.errorCode)n.compareDia("您最多只能同时对比4款商品哦～","");else if(11004===e.errorCode)n.compareDia("不能添加未启用的商品哦～",""),window.location.reload();else if(11005===e.errorCode)n.compareDia("该商品不存在哦～","");else if(11006===e.errorCode){var t=e.errorMsg,i='请选择类别为 "'+t+'" 的商品加入';n.compareDia("不同类别的产品无法加入对比哦～",i)}else n.compareDia("系统繁忙，请稍后再试～","")}function d(){var e=u.getSkuId(s),t=0;u.collectBar.hasItems.children().remove(),s.forEach(function(i){if(t<e.length&&0!==e[t]){var a="",s=n.imageUrlProcess(i.image,120),o=i.url+"?skuId="+i.skuId;a+='<dl class="hasItem"><div class="item-full"><dt><a href="'+o+'" target="_blank"><img src="'+s+'" width="75" height="75"></a></dt><dd><a href="'+o+'" class="diff-item-name" target="_blank"><span>'+i.name+'</span></a><div class="diff-item-operate"><span class="goods-price"><small>¥ </small><span class="vm-money">'+Number(i.price).toFixed(2)+'</span></span><a href="javascript:;" class="diff-goods-delete"  data-mtype="click_store_public_compare_del" data-bh="click_store_public_compare_del">删除</a></div></dd></div></dl>',u.collectBar.hasItems.append(a)}t++}),2===t?a(".hasItem:gt(1)").children(".item-full").remove():3===t?a(".hasItem:gt(2)").children(".item-full").remove():4===t&&a(".hasItem:eq(4)").children(".item-full").remove()}var l,u=this,p=window.location.host;"detail.meizu.com"===p?a("#J_compare").on("click",function(){if(window.livePropertyView.model.get("skuId"))l=window.livePropertyView.model.get("skuId");else{var e=window.MZ.modelData.recommend.split("+")[0];a.each(window.MZ.modelData.cspuMap,function(t){e===t&&(l=window.MZ.modelData.cspuMap[e].skuId)})}window.location.href="//www.meizu.com/compare.html?compareId="+l+"-"+window.MZ.modelData.itemId}):"lists.meizu.com"===p&&(this.romanceList(),a(document).on("click",".compare-btn-list",function(){var e=a(this);l=parseInt(e.parent().find("a").attr("href").split("?")[1].split("&")[0].split("=")[1],10);var i=u.getSkuId(s);t(l,i,e)})),a(".operate .hide-me").click(function(){a("#compareBar").css("display","none")}),a(document).on("click",".diff-goods-delete",function(){var t=a(this);o=u.getSkuId(s);var i=Number(t.parents(".hasItem").prevAll().length),n=o[i],r=u.remoteHost.addCompare+"/compare/del";u.ajax(r,{skuId:n},"get","jsonp").done(function(t){e(i),s=t,"lists.meizu.com"===p&&a(".goods-list-wrap").find(".compare-btn-list").each(function(e){var t=a(".goods-list-wrap").find(".compare-btn-list").eq(e),i=t.parent().find("a").attr("href").split("?")[1].split("&")[0].split("=")[1];i.toString()===n.toString()&&(t.css("display","none"),t.removeClass("hasView"),t.parent().hover(function(){t.css("display","block")},function(){t.css("display","none")}))})})}),a("#J_btnCompare").on("click",function(){
a.ajax({url:u.remoteHost.addCompare+"/compare/check",type:"get",dataType:"jsonp",jsonp:"callback"}).done(function(e){if(e.success){var t=e.data,o=[];s=[];var r,c=0;t.forEach(function(e){e.status?(s[c]=e,c++):o.push(e.name)}),1===o.length?(r=o[0]+"商品不存在哦～",n.compareDia(r,"")):o.length>1&&(r=o.join(",")+"商品不存在哦～",n.compareDia(r,"")),d();var l=u.getSkuId(s);a("#barNum").text(a("#diffBar").find(".item-full").length),i();var p=a.trim(r).length,m=parseInt(p/4*1e3,10);s.length&&window.setTimeout(function(){var e=l.join("-");location.href=u.remoteHost.addCompare+"/compare/"+e+".html"},m)}else n.compareDia("系统繁忙，请稍后再试～","")}).fail(function(){n.compareDia("系统繁忙，请稍后再试～","")})}),a("#J_compareClear").on("click",function(){var e=u.remoteHost.addCompare+"/compare/delAll";u.ajax(e,null,"get","jsonp").done(function(){s=[],u.collectBar.hasItems.children().remove(),a("#diffOperate").css("display","none"),a("#barNum").text(a("#diffBar").find(".item-full").length);var e="";e+='<div class="compare-clear-hint">您还没有选择需要对比的商品哦～</div>',a("#tabCon").append(e),"lists.meizu.com"===p&&a(".goods-list-wrap").find(".compare-btn-list").each(function(e){var t=a(".goods-list-wrap").find(".compare-btn-list").eq(e);t.removeClass("hasView"),t.css("display","none"),t.parent().hover(function(){t.css("display","block")},function(){t.css("display","none")})})})})},ajax:function(e,t,i,n){var s=a.Deferred();return a.ajax({url:e,type:i||"get",data:t||null,dataType:n||"json",jonp:"callback"}).done(function(e){e.success?s.resolve(e.data):s.reject(e)}).fail(function(){s.reject("系统繁忙，请稍后再试～")}),s.promise()},getSkuId:function(e){var t=[0,0,0,0],i=[];e.length&&e.forEach(function(e){i.push(e.skuId)});for(var n in i)t[n]=i[n];return t}};e.exports=r},function(e,t){e.exports='<div class="compare-bar" id="compareBar" style="position:fixed">\n  <div class="diff-bar" id="diffBar">\n    <div class="diff-bar-title">\n      <div class="bar-title">\n        <p>商品对比 (<span class="bar-num" id="barNum">0</span>/4)</p>\n      </div>\n      <div class="operate" data-mtype="click_store_public_compare_close" data-bh="click_store_public_compare_close">\n        <i class="iconfont icon-chahao hide-me"></i>\n      </div>\n    </div>\n\n    <div class="diff-bd tab-cons">\n      <div class="tab-con clearfix" id="tabCon" style="display: block">\n        <div class="diff-items" id="diffItems">\n          <!--<dl class="hasItem" >-->\n            <!--<div class="item-full">-->\n              <!--<dt>-->\n                <!--<a href="#" target="_blank">-->\n                  <!--<img src="../../image/6-plus.jpg" width="75" height="75">-->\n                <!--</a>-->\n              <!--</dt>-->\n              <!--<dd>-->\n                <!--<a href="#" class="diff-item-name">-->\n                  <!--<span>JBL T280A 立体声入耳式手机耳机</span>-->\n                <!--</a>-->\n                <!--<div class="diff-item-operate">-->\n                  <!--<span class="goods-price">-->\n                      <!--<small>¥ </small><span class="vm-money">199.00</span>-->\n                  <!--</span>-->\n                  <!--<a href="#" class="diff-goods-delete">删除</a>-->\n                <!--</div>-->\n              <!--</dd>-->\n            <!--</div>-->\n          <!--</dl>-->\n        </div>\n\n        <div class="diff-operate" id="diffOperate">\n          <a href="javascript:void(0);" id="J_btnCompare" class="btn btn-primary btn-lg" data-mtype="click_store_public_compare" data-bh="click_store_public_compare"><i></i>对比</a>\n          <a href="javascript:void(0);" id="J_compareClear" data-mtype="click_store_public_compare_delall" data-bh="click_store_public_compare_delall">清空商品</a>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},15,15,,,,,,function(e,t,i){var n=i(13);i(50);var a,s,o,r,c,d,l,u,p,m,h=window.dialog;s=function(e,t,i,a){var s=n.Deferred();return n.ajax({url:e,data:t||null,type:i||"get",dataType:a||"jsonp",timeout:4e3,cache:!1}).done(function(e){e.success?s.resolve(e.data):s.reject(e)}).fail(function(){s.reject("网络异常，请稍后再试!")}),s.promise()},a=function(e,t){var i='<div class="match-dialog" id="artAlert"><div class="match-alert-bd tcenter"><div class="match-alert-message"><p class="match-alert-message-bd"><i class="iconfont icon-matach-infor Dia-icon"></i><span class="alert-message-bi">'+e+'</span></p><span class="alert-message-little">'+t+'</span></div><i class="visible"></i></div><a class="match-close" id="J_DialogClose" href="javascript:;">╳</a></div>';h.get("compareDia")&&h.get("compareDia").remove();var a=h({id:"compareDia",width:396,height:130,content:i,onshow:function(){var e=this;n(e.node).on("click",".match-close",function(){e.close().remove()})}}).show(),s=n.trim(e).length+n.trim(t).length,o=parseInt(s/4*1e3,10);setTimeout(function(){a.close().remove()},o)},o=function(e,t,i,n){var a,s=e[t].cspuMap[i];for(var o in s)o===n&&"image"===n?a=m(s[o],240):o===n&&(a=s[o]);return a},m=function(e,t,i){var n;return i=i||".jpg",n=/^\/\/openfile/.test(e)?e+t+"x"+t+i:e+"@"+t+"x"+t+i},r=function(e,t){var i=0,n=0,a=!0;if(e.length<t.length)return!1;for(;i<t.length&&n<e.length;)if(e[n]<t[i])n++;else if(e[n]===t[i])n++,i++;else if(e[n]>t[i])return!1;return i<t.length&&(a=!1),a},c=function(e,t){var i=[];return n.each(e,function(n){t===e[n]&&i.push(n)}),i},d=function(e){e=e.sort();for(var t=[e[0]],i=1,n=e.length;i<n;i++)e[i]!==t[t.length-1]&&t.push(e[i]);return t},l=function(e){var t=[];for(var i in e)t.push(e[i].length);return t.sort()[t.length-1]},u=function(e){var t=location.href.split("/").splice(0,location.href.split("/").length-1).join("/");history.replaceState?history.replaceState(null,"",t+"/"+e.join("-")):window.location.replace(t+"/"+e.join("-"))},p=function(e){e.length>1?n(document).attr("title",e[0]+"和"+e[1]+" 商品对比-魅族商城"):1===e.length?n(document).attr("title",e[0]+" 商品对比-魅族商城"):0===e.length&&n(document).attr("title"," 商品对比-魅族商城")},e.exports={ajax:s,compareDia:a,getAttrFromJson:o,isSubset:r,getObjectMin:c,unique:d,fromObjGetMaxLen:l,changeUrlDisAjax:u,setTitle:p,imageUrlProcess:m}},function(e,t,i){var n=i(13);!function(){function e(t){var n=i[t],a="exports";return"object"==typeof n?n:(n[a]||(n[a]={},n[a]=n.call(n[a],e,n[a],n)||n[a]),n[a])}function t(e,t){i[e]=t}var i={};t("jquery",function(){return n}),t("popup",function(e){function t(){this.destroyed=!1,this.__popup=i("<div />").css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1").html(this.innerHTML).appendTo("body"),this.__backdrop=this.__mask=i("<div />").css({opacity:.7,background:"#000"}),this.node=this.__popup[0],this.backdrop=this.__backdrop[0],n++}var i=e("jquery"),n=0,a=!("minWidth"in i("html")[0].style),s=!a;return i.extend(t.prototype,{node:null,backdrop:null,fixed:!1,destroyed:!0,open:!1,returnValue:"",autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-popup",show:function(e){if(this.destroyed)return this;var n=this.__popup,o=this.__backdrop;if(this.__activeElement=this.__getActive(),this.open=!0,this.follow=e||this.follow,!this.__ready){if(n.addClass(this.className).attr("role",this.modal?"alertdialog":"dialog").css("position",this.fixed?"fixed":"absolute"),a||i(window).on("resize",i.proxy(this.reset,this)),this.modal){var r={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",zIndex:this.zIndex||t.zIndex};n.addClass(this.className+"-modal"),s||i.extend(r,{position:"absolute",width:i(window).width()+"px",height:i(document).height()+"px"}),o.css(r).attr({tabindex:"0"}).on("focus",i.proxy(this.focus,this)),this.__mask=o.clone(!0).attr("style","").insertAfter(n),o.addClass(this.className+"-backdrop").insertBefore(n),this.__ready=!0}n.html()||n.html(this.innerHTML)}return n.addClass(this.className+"-show").show(),o.show(),this.reset().focus(),this.__dispatchEvent("show"),this},showModal:function(){return this.modal=!0,this.show.apply(this,arguments)},close:function(e){return!this.destroyed&&this.open&&(void 0!==e&&(this.returnValue=e),this.__popup.hide().removeClass(this.className+"-show"),this.__backdrop.hide(),this.open=!1,this.blur(),this.__dispatchEvent("close")),this},remove:function(){if(this.destroyed)return this;this.__dispatchEvent("beforeremove"),t.current===this&&(t.current=null),this.__popup.remove(),this.__backdrop.remove(),this.__mask.remove(),a||i(window).off("resize",this.reset),this.__dispatchEvent("remove");for(var e in this)delete this[e];return this},reset:function(){var e=this.follow;return e?this.__follow(e):this.__center(),this.__dispatchEvent("reset"),this},focus:function(){var e=this.node,n=this.__popup,a=t.current,s=this.zIndex=t.zIndex++;if(a&&a!==this&&a.blur(!1),!i.contains(e,this.__getActive())){var o=n.find("[autofocus]")[0];!this._autofocus&&o?this._autofocus=!0:o=e,this.__focus(o)}return n.css("zIndex",s),t.current=this,n.addClass(this.className+"-focus"),this.__dispatchEvent("focus"),this},blur:function(){var e=this.__activeElement,t=arguments[0];return t!==!1&&this.__focus(e),this._autofocus=!1,this.__popup.removeClass(this.className+"-focus"),this.__dispatchEvent("blur"),this},addEventListener:function(e,t){return this.__getEventListener(e).push(t),this},removeEventListener:function(e,t){for(var i=this.__getEventListener(e),n=0;n<i.length;n++)t===i[n]&&i.splice(n--,1);return this},__getEventListener:function(e){var t=this.__listener;return t||(t=this.__listener={}),t[e]||(t[e]=[]),t[e]},__dispatchEvent:function(e){var t=this.__getEventListener(e);this["on"+e]&&this["on"+e]();for(var i=0;i<t.length;i++)t[i].call(this)},__focus:function(e){try{this.autofocus&&!/^iframe$/i.test(e.nodeName)&&e.focus()}catch(t){}},__getActive:function(){try{var e=document.activeElement,t=e.contentDocument,i=t&&t.activeElement||e;return i}catch(n){}},__center:function(){var e=this.__popup,t=i(window),n=i(document),a=this.fixed,s=a?0:n.scrollLeft(),o=a?0:n.scrollTop(),r=t.width(),c=t.height(),d=e.width(),l=e.height(),u=(r-d)/2+s,p=382*(c-l)/1e3+o,m=e[0].style;m.left=Math.max(parseInt(u),s)+"px",m.top=Math.max(parseInt(p),o)+"px"},__follow:function(e){var t=e.parentNode&&i(e),n=this.__popup;if(this.__followSkin&&n.removeClass(this.__followSkin),t){var a=t.offset();if(a.left*a.top<0)return this.__center()}var s=this,o=this.fixed,r=i(window),c=i(document),d=r.width(),l=r.height(),u=c.scrollLeft(),p=c.scrollTop(),m=n.width(),h=n.height(),f=t?t.outerWidth():0,v=t?t.outerHeight():0,g=this.__offset(e),y=g.left,b=g.top,k=o?y-u:y,w=o?b-p:b,_=o?0:u,x=o?0:p,S=_+d-m,C=x+l-h,T={},I=this.align.split(" "),P=this.className+"-",A={top:"bottom",bottom:"top",left:"right",right:"left"},M={top:"top",bottom:"top",left:"left",right:"left"},D=[{top:w-h,bottom:w+v,left:k-m,right:k+f},{top:w,bottom:w-h+v,left:k,right:k-m+f}],E={left:k+f/2-m/2,top:w+v/2-h/2},j={left:[_,S],top:[x,C]};i.each(I,function(e,t){D[e][t]>j[M[t]][1]&&(t=I[e]=A[t]),D[e][t]<j[M[t]][0]&&(I[e]=A[t])}),I[1]||(M[I[1]]="left"===M[I[0]]?"top":"left",D[1][I[1]]=E[M[I[1]]]),P+=I.join("-")+" "+this.className+"-follow",s.__followSkin=P,t&&n.addClass(P),T[M[I[0]]]=parseInt(D[0][I[0]]),T[M[I[1]]]=parseInt(D[1][I[1]]),n.css(T)},__offset:function(e){var t=e.parentNode,n=t?i(e).offset():{left:e.pageX,top:e.pageY};e=t?e:e.target;var a=e.ownerDocument,s=a.defaultView||a.parentWindow;if(s==window)return n;var o=s.frameElement,r=i(a),c=r.scrollLeft(),d=r.scrollTop(),l=i(o).offset(),u=l.left,p=l.top;return{left:n.left+u-c,top:n.top+p-d}}}),t.zIndex=1024,t.current=null,t}),t("dialog-config",{backdropBackground:"#000",backdropOpacity:.7,content:'<span class="ui-dialog-loading">Loading..</span>',title:"",statusbar:"",button:null,ok:null,cancel:null,okValue:"ok",cancelValue:"cancel",cancelDisplay:!0,width:"",height:"",padding:"",skin:"",quickClose:!1,cssUri:"../css/ui-dialog.css",innerHTML:'<div i="dialog" class="ui-dialog"><div class="ui-dialog-arrow-a"></div><div class="ui-dialog-arrow-b"></div><table class="ui-dialog-grid"><tr><td i="header" class="ui-dialog-header"><button i="close" class="ui-dialog-close">&#215;</button><div i="title" class="ui-dialog-title"></div></td></tr><tr><td i="body" class="ui-dialog-body"><div i="content" class="ui-dialog-content"></div></td></tr><tr><td i="footer" class="ui-dialog-footer"><div i="statusbar" class="ui-dialog-statusbar"></div><div i="button" class="ui-dialog-button"></div></td></tr></table></div>'}),t("dialog",function(e){var t=e("jquery"),i=e("popup"),n=e("dialog-config"),a=n.cssUri;if(a){var s=e[e.toUrl?"toUrl":"resolve"];s&&(a=s(a),a='<link rel="stylesheet" href="'+a+'" />',t("base")[0]?t("base").before(a):t("head").append(a))}var o=0,r=new Date-0,c=!("minWidth"in t("html")[0].style),d="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),l=!c&&!d,u=function(e,i,n){var a=e=e||{};("string"==typeof e||1===e.nodeType)&&(e={content:e,fixed:!d}),e=t.extend(!0,{},u.defaults,e),e.original=a;var s=e.id=e.id||r+o,c=u.get(s);return c?c.focus():(l||(e.fixed=!1),e.quickClose&&(e.modal=!0,e.backdropOpacity=0),t.isArray(e.button)||(e.button=[]),void 0!==n&&(e.cancel=n),e.cancel&&e.button.push({id:"cancel",value:e.cancelValue,callback:e.cancel,display:e.cancelDisplay}),void 0!==i&&(e.ok=i),e.ok&&e.button.push({id:"ok",value:e.okValue,callback:e.ok,autofocus:!0}),u.list[s]=new u.create(e))},p=function(){};p.prototype=i.prototype;var m=u.prototype=new p;return u.create=function(e){var n=this;t.extend(this,new i);var a=(e.original,t(this.node).html(e.innerHTML)),s=t(this.backdrop);return this.options=e,this._popup=a,t.each(e,function(e,t){"function"==typeof n[e]?n[e](t):n[e]=t}),e.zIndex&&(i.zIndex=e.zIndex),a.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")}),this._$("close").css("display",this.cancel===!1?"none":"").attr("title",this.cancelValue).on("click",function(e){n._trigger("cancel"),e.preventDefault()}),this._$("dialog").addClass(this.skin),this._$("body").css("padding",this.padding),e.quickClose&&s.on("onmousedown"in document?"mousedown":"click",function(){return n._trigger("cancel"),!1}),this.addEventListener("show",function(){s.css({opacity:0,background:e.backdropBackground}).animate({opacity:e.backdropOpacity},150)}),this._esc=function(e){var t=e.target,a=t.nodeName,s=/^input|textarea$/i,o=i.current===n,r=e.keyCode;!o||s.test(a)&&"button"!==t.type||27===r&&n._trigger("cancel")},t(document).on("keydown",this._esc),this.addEventListener("remove",function(){t(document).off("keydown",this._esc),delete u.list[this.id]}),o++,u.oncreate(this),this},u.create.prototype=m,t.extend(m,{content:function(e){var i=this._$("content");return"object"==typeof e?(e=t(e),i.empty("").append(e.show()),this.addEventListener("beforeremove",function(){t("body").append(e.hide())})):i.html(e),this.reset()},title:function(e){return this._$("title").text(e),this._$("header")[e?"show":"hide"](),this},width:function(e){return this._$("content").css("width",e),this.reset()},height:function(e){return this._$("content").css("height",e),this.reset()},button:function(e){e=e||[];var i=this,n="",a=0;return this.callbacks={},"string"==typeof e?(n=e,a++):t.each(e,function(e,s){var o=s.id=s.id||s.value,r="";i.callbacks[o]=s.callback,s.display===!1?r=' style="display:none"':a++,n+='<button type="button" i-id="'+o+'"'+r+(s.disabled?" disabled":"")+(s.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+s.value+"</button>",i._$("button").on("click","[i-id="+o+"]",function(e){var n=t(this);n.attr("disabled")||i._trigger(o),e.preventDefault()})}),this._$("button").html(n),this._$("footer")[a?"show":"hide"](),this},statusbar:function(e){return this._$("statusbar").html(e)[e?"show":"hide"](),this},_$:function(e){return this._popup.find("[i="+e+"]")},_trigger:function(e){var t=this.callbacks[e];return"function"!=typeof t||t.call(this)!==!1?this.close().remove():this}}),u.oncreate=t.noop,u.getCurrent=function(){return i.current},u.get=function(e){return void 0===e?u.list:u.list[e]},u.list={},u.defaults=n,u}),window.dialog=e("dialog")}()},function(e,t,i){var n=i(13),a=i(27);i(26),i(52);var s=window.dialog,o=i(34),r=i(53),c=window.MZ.modelData,d={btnBuy:n("#J_btnBuy"),btnRemind:n("#J_btnRemind")},l={getCaptcha:"//store-server.meizu.com/captcha/get?",captcha:"//store-server.meizu.com/captcha/check",addRemind:"//detail.meizu.com/api/sku/notify/"},u=function(e){this.liveView=e,this.model=e.model,this.init()};u.prototype.init=function(){var e=this,t=e.liveView;e.notifySkus=[],c.notifySkus&&c.notifySkus.length&&c.notifySkus.forEach(function(t){e.notifySkus.push(t)}),e.bindEvent(),t.listenTo(t.model,"change:skuId",e.syncShow.bind(e)),e.syncShow()},u.prototype.validateExistsAble=function(e){return this.notifySkus.some(function(t){return t.skuId===e&&(2===t.type||1===t.type&&t.distTimeSec>1800)})},u.prototype.syncShow=function(){var e=this,t=2===e.model.get("activeStatus")||3===e.model.get("activeStatus"),i=e.model.get("skuId");t&&e.validateExistsAble(i)?(d.btnBuy.hide(),d.btnRemind.css("display","inline-block")):d.btnRemind.css("display","none")},u.prototype.bindEvent=function(){var e=this;d.btnRemind.on("click",function(){e.showRemind()})},u.prototype.showRemind=function(){var e=this;e.dialogRemind=s({id:"artAlert",width:502,height:280,content:r,backdropOpacity:.1,onshow:function(){e.dialogBind(this.node)},onclose:function(){n(this.node).off()}}).showModal()},u.prototype.getSession=function(){return n.cookie("MZ_STORE_UUID")||(new Date).getTime()+Math.random().toString(16).slice(2)},u.prototype.dialogBind=function(e){var t=this,i=n(e),a=t.getSession(),s=l.getCaptcha+n.param({sid:a,type:"mix",len:4});n("#J_verifiyCode").attr("src",s),i.on("click",".actionClose",function(e){e.preventDefault(),t.dialogRemind.remove()}).on("keyup",".phoneNumber",function(e){var i=n(e.currentTarget),a=i.val();i.hasClass("error")&&t.validPhone(a)?(i.next().text(""),i.removeClass("error")):!i.hasClass("error")&&a&&a.length>=11&&!t.validPhone()?(i.next().text("请输入正确的手机号码"),i.addClass("error")):!i.hasClass("error")&&t.validPhone()&&(i.next().text(""),i.removeClass("error"))}).on("foucsout blur",".phoneNumber",function(e){var i=n(e.currentTarget),a=i.val();!a&&!e.isTrigger||t.validPhone(a)?(i.next().text(""),i.removeClass("error")):(i.next().text("请输入正确的手机号码"),i.addClass("error"))}).on("keyup",".validcode",function(e){var t=n(e.currentTarget);t.parent().next().text("")}).on("blur",".validcode",function(e){var t=n(e.currentTarget),i=t.val().trim();/^[a-zA-Z0-9]{4}$/.test(i)?t.parent().next().text(""):t.parent().next().text("请输入正确的验证码")}).on("click",".reload",function(e){e.preventDefault(),i.find("#J_verifiyCode").attr("src",function(){var e=this.src.slice(0,this.src.search(/&t=[\d\.]+$/));return e+"&t="+Math.random()})}).on("click",".actionEnsure",function(e){e.preventDefault();var n=i.find(".phoneNumber"),s=i.find(".validcode"),o=n.val().trim(),r=s.val().trim();return/^1[0-9]{10}$/.test(o)&&/^[a-zA-Z0-9]{4}$/.test(r)?void t.applyNotify({phone:o,platform:1,uuid:a,verifyCode:r}):(n.trigger("blur"),void s.trigger("blur"))})},u.prototype.validPhone=function(e){return e=n.trim(e),/^1[0-9]{10}$/.test(e)},u.prototype.applyNotify=function(e){var t=this,i=t.model.get("skuId"),s=n(t.dialogRemind.node);a.ajax(l.addRemind+i,e).done(function(){s.find(".stepOne").hide(),s.find(".stepTwo").show().find(".J_result").text("开售提醒设置成功！")}).fail(function(e){e.errorCode>=12024&&e.errorCode<=12026?s.find(".validcode").parent().next().text("验证码已过期!"):12027===e.errorCode?s.find(".validcode").parent().next().text("验证码不正确!"):13002===e.errorCode?s.find(".phoneNumber").next().text("手机号码不正确!"):13003===e.errorCode?(s.find(".stepOne").hide(),s.find(".stepTwo").show().find(".J_result").text("该手机号已为此产品设置开售提醒!")):13015===e.errorCode?(s.find(".stepOne").hide(),s.find(".stepTwo").show().find(".J_result").text("产品即将开售，此时不能设置提醒！")):13012===e.errorCode?(t.dialogRemind.remove(),t.addAlertCHange()):(t.dialogRemind.remove(),t.addCartrror())})},u.prototype.handlerCartResult=function(e,t,i){var n=this;!e&&t&&i?n.addCartSuccess(t,i):n.addCartrror(e,i)},u.prototype.addCartSuccess=function(e,t){},u.prototype.addAlertCHange=function(){var e={type:"warning",message:"商品状态发生变更，请刷新页面后重试！"};new o(e)},u.prototype.addCartrror=function(){var e={type:"error",message:"网络错误，请稍后再试！"};new o(e)},e.exports=window._Remind=u},function(e,t,i){var n,a,s;!function(o){a=[i(13)],n=o,s="function"==typeof n?n.apply(t,a):n,!(void 0!==s&&(e.exports=s))}(function(e){function t(e){return r.raw?e:encodeURIComponent(e)}function i(e){return r.raw?e:decodeURIComponent(e)}function n(e){return t(r.json?JSON.stringify(e):String(e))}function a(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(o," ")),r.json?JSON.parse(e):e}catch(t){}}function s(t,i){var n=r.raw?t:a(t);return e.isFunction(i)?i(n):n}var o=/\+/g,r=e.cookie=function(a,o,c){if(void 0!==o&&!e.isFunction(o)){if(c=e.extend({},r.defaults,c),"number"==typeof c.expires){var d=c.expires,l=c.expires=new Date;l.setTime(+l+864e5*d)}return document.cookie=[t(a),"=",n(o),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}for(var u=a?void 0:{},p=document.cookie?document.cookie.split("; "):[],m=0,h=p.length;m<h;m++){var f=p[m].split("="),v=i(f.shift()),g=f.join("=");if(a&&a===v){u=s(g,o);break}a||void 0===(g=s(g))||(u[v]=g)}return u};r.defaults={},e.removeCookie=function(t,i){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},i,{expires:-1})),!e.cookie(t))}})},function(e,t){e.exports='<div class="bi-remind">\n    <form class="bi-remind-bd stepOne">\n        <p class="mod-title">商品开售时我们将以短信的方式提醒您，请输入手机号码</p>\n        <div class="mod-group">\n            <input  class="vm-control phoneNumber" type="text" name="phoneNumber" placeholder="手机号码" />\n            <div class="vm-error"></div>\n        </div>\n        <div class="mod-group">\n            <div class="vm-verifiy">\n                <input class="vm-control validcode" type="text" name="validCode" placeholder="验证码" />\n                <img id="J_verifiyCode" src="//store-server.meizu.com/captcha/get?sid=302627852979231C926B14FAAD263D5AB1D6260950723BE&type=mix&len=4" alt="验证码" width="72" />\n                <a class="reload" href="javascript:;">换一张</a>\n            </div>\n            <div class="vm-error"></div>\n        </div>\n        <div class="mod-error errorMsg">\n            \n        </div>\n        <div class="mod-action">\n            <button class="btn btn-primary actionEnsure">确定</button>\n        </div>\n    </form>\n    <div class="bi-remind-success stepTwo" style="display:none;">\n        <p class="mod-result J_result"></p>\n        <button class="btn btn-primary actionClose">我知道了</button>\n    </div>\n    <a class="bi-remind-close actionClose" href="javascript:;">\n        <i class="iconfont icon-chahao"></i>\n    </a>\n</div>'},function(e,t){e.exports='<%for(var i=0, length=packages.length; i<length; i++){%>\n    <a data-value="<%= packages[i].id %>" data-mtype="click_store_de_tc_<%= i+1 %>" data-bh="click_store_de_tc_<%= i+1 %>" <%if(!packages[i].available){%>class="disabled"<%}%> href="#" title="<%= packages[i].name %>">\n        <p class="vm-text <% if (length === 1 && packages[i].id === 0) { %>vm-standard<% } %>">\n            <%=packages[i].name%>\n            <%if(packages[i].items && packages[i].items.length){%>\n                <%if(packages[i].available){%>\n                    <%if(packages[i].profits>0){%>\n                        <span class="vm-text-profits">省<em><%=packages[i].profits%></em>元</span>\n                    <%}%>\n                <% }else{ %>\n                    已售罄\n                <% } %>\n            <%}%>\n        </p>\n    </a>\n<%}%>'},function(e,t){e.exports='<ul class="clearfix">\n    <% for(var i = 0, length = items.length; i < length; i++) { %>\n    <li>\n        <p class="vm-pic">\n            <img src="<%= items[i].cells[items[i].recommend].images + \'@80x80.jpg\' %>" width="60" height="60" alt="<%= items[i].cells[items[i].recommend].names %>">\n        </p>\n        <p class="vm-tit">\n            <%= items[i].name %>\n        </p>\n        <p class="vm-price">\n            ¥ <%= items[i].cells[items[i].recommend].price.toFixed(2) %>\n        </p>\n        <div class="vm-prop">\n            <% for (var p in items[i].saleAttrs) { %>\n                <p>\n                <% for (var jj = 0, length2 = items[i].saleAttrs[p].length; jj < length2; jj++) { %>\n                    <% if (!items[i].saleAttrs[p][jj].imageColor || length2 === 1) { %>\n                        <a class="vm-prop-text <% if (items[i].recommend === p + \':\' + items[i].saleAttrs[p][jj].id) { %>selected<% } %>" href="javascript:;" data-sku="<%= items[i].cells[p + \':\' + items[i].saleAttrs[p][jj].id].skuId %>" data-sid="<%= items[i].id %>" data-key="<%= p + \':\' + items[i].saleAttrs[p][jj].id %>" title="<%= items[i].saleAttrs[p][jj].name %>">\n                            <span><%= items[i].saleAttrs[p][jj].name %></span>\n                        </a>\n                    <% } else { %>\n                        <a class="vm-prop-img <% if (items[i].recommend === p + \':\' + items[i].saleAttrs[p][jj].id) { %>selected<% } %>" href="javascript:;" data-sku="<%= items[i].cells[p + \':\' + items[i].saleAttrs[p][jj].id].skuId %>" data-sid="<%= items[i].id %>" data-key="<%= p + \':\' + items[i].saleAttrs[p][jj].id %>" title="<%= items[i].saleAttrs[p][jj].name %>">\n                            <img class="vm-prop-sale" src="<%= items[i].saleAttrs[p][jj].imageColor %>" width="20" height="20" >\n                       </a>\n                    <% } %>\n                <% } %>\n                </p>\n            <% } %>\n        </div>\n    </li>\n    <% } %>\n</ul>'},function(e,t){e.exports='<div class="bi-dialog" id="J_dialogOrder">\n    <div class="bi-dialog-inner">\n        <div class="bi-dialog-hd"></div>\n        <div class="bi-dialog-bd tcenter">\n            <p class="dialog-cont-pic"></p>\n        </div>\n        <p class="dialog-cont-text">\n            参加活动的人数较多，正在为您排队，请稍候！<br/>\n            无需刷新页面，排队自动进行中……\n        </p>\n        <div class="bi-dialog-ft"></div>\n    </div>\n    <a class="bi-close" id="J_DialogClose" href="javascript:;">╳</a>\n</div>\n'},,,function(e,t,i){(function(e){var t=$=i(13);!function(t){var i=!0;t.flexslider=function(n,a){var s=t(n);s.vars=t.extend({},t.flexslider.defaults,a);var o,r=s.vars.namespace,c=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,d=("ontouchstart"in window||c||window.DocumentTouch&&document instanceof DocumentTouch)&&s.vars.touch,l="click touchend MSPointerUp keyup",u="",p="vertical"===s.vars.direction,m=s.vars.reverse,h=s.vars.itemWidth>0,f="fade"===s.vars.animation,v=""!==s.vars.asNavFor,g={};t.data(n,"flexslider",s),g={init:function(){s.animating=!1,s.currentSlide=parseInt(s.vars.startAt?s.vars.startAt:0,10),isNaN(s.currentSlide)&&(s.currentSlide=0),s.animatingTo=s.currentSlide,s.atEnd=0===s.currentSlide||s.currentSlide===s.last,s.containerSelector=s.vars.selector.substr(0,s.vars.selector.search(" ")),s.slides=t(s.vars.selector,s),s.container=t(s.containerSelector,s),s.count=s.slides.length,s.syncExists=t(s.vars.sync).length>0,"slide"===s.vars.animation&&(s.vars.animation="swing"),s.prop=p?"top":"marginLeft",s.args={},s.manualPause=!1,s.stopped=!1,s.started=!1,s.startTimeout=null,s.transitions=!s.vars.video&&!f&&s.vars.useCSS&&function(){var e=document.createElement("div"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in t)if(void 0!==e.style[t[i]])return s.pfx=t[i].replace("Perspective","").toLowerCase(),s.prop="-"+s.pfx+"-transform",!0;return!1}(),s.ensureAnimationEnd="",""!==s.vars.controlsContainer&&(s.controlsContainer=t(s.vars.controlsContainer).length>0&&t(s.vars.controlsContainer)),""!==s.vars.manualControls&&(s.manualControls=t(s.vars.manualControls).length>0&&t(s.vars.manualControls)),""!==s.vars.customDirectionNav&&(s.customDirectionNav=2===t(s.vars.customDirectionNav).length&&t(s.vars.customDirectionNav)),s.vars.randomize&&(s.slides.sort(function(){return Math.round(Math.random())-.5}),s.container.empty().append(s.slides)),s.doMath(),s.setup("init"),s.vars.controlNav&&g.controlNav.setup(),s.vars.directionNav&&g.directionNav.setup(),s.vars.keyboard&&(1===t(s.containerSelector).length||s.vars.multipleKeyboard)&&t(document).bind("keyup",function(e){var t=e.keyCode;if(!s.animating&&(39===t||37===t)){var i=39===t?s.getTarget("next"):37===t&&s.getTarget("prev");s.flexAnimate(i,s.vars.pauseOnAction)}}),s.vars.mousewheel&&s.bind("mousewheel",function(e,t,i,n){e.preventDefault();var a=t<0?s.getTarget("next"):s.getTarget("prev");s.flexAnimate(a,s.vars.pauseOnAction)}),s.vars.pausePlay&&g.pausePlay.setup(),s.vars.slideshow&&s.vars.pauseInvisible&&g.pauseInvisible.init(),s.vars.slideshow&&(s.vars.pauseOnHover&&s.hover(function(){s.manualPlay||s.manualPause||s.pause()},function(){s.manualPause||s.manualPlay||s.stopped||s.play()}),s.vars.pauseInvisible&&g.pauseInvisible.isHidden()||(s.vars.initDelay>0?s.startTimeout=setTimeout(s.play,s.vars.initDelay):s.play())),v&&g.asNav.setup(),d&&s.vars.touch&&g.touch(),(!f||f&&s.vars.smoothHeight)&&t(window).bind("resize orientationchange focus",g.resize),s.find("img").attr("draggable","false"),setTimeout(function(){s.vars.start(s)},200)},asNav:{setup:function(){s.asNav=!0,s.animatingTo=Math.floor(s.currentSlide/s.move),s.currentItem=s.currentSlide,s.slides.removeClass(r+"active-slide").eq(s.currentItem).addClass(r+"active-slide"),c?(n._slider=s,s.slides.each(function(){var e=this;e._gesture=new MSGesture,e._gesture.target=e,e.addEventListener("MSPointerDown",function(e){e.preventDefault(),e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1),e.addEventListener("MSGestureTap",function(e){e.preventDefault();var i=t(this),n=i.index();t(s.vars.asNavFor).data("flexslider").animating||i.hasClass("active")||(s.direction=s.currentItem<n?"next":"prev",s.flexAnimate(n,s.vars.pauseOnAction,!1,!0,!0))})})):s.slides.on(l,function(e){e.preventDefault();var i=t(this),n=i.index(),a=i.offset().left-t(s).scrollLeft();a<=0&&i.hasClass(r+"active-slide")?s.flexAnimate(s.getTarget("prev"),!0):t(s.vars.asNavFor).data("flexslider").animating||i.hasClass(r+"active-slide")||(s.direction=s.currentItem<n?"next":"prev",s.flexAnimate(n,s.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){s.manualControls?g.controlNav.setupManual():g.controlNav.setupPaging()},setupPaging:function(){var e,i,n="thumbnails"===s.vars.controlNav?"control-thumbs":"control-paging",a=1;if(s.controlNavScaffold=t('<ol class="'+r+"control-nav "+r+n+'"></ol>'),s.pagingCount>1)for(var o=0;o<s.pagingCount;o++){if(i=s.slides.eq(o),void 0===i.attr("data-thumb-alt")&&i.attr("data-thumb-alt",""),altText=""!==i.attr("data-thumb-alt")?altText=' alt="'+i.attr("data-thumb-alt")+'"':"",e="thumbnails"===s.vars.controlNav?'<img src="'+i.attr("data-thumb")+'"'+altText+"/>":'<a href="#">'+a+"</a>","thumbnails"===s.vars.controlNav&&!0===s.vars.thumbCaptions){var c=i.attr("data-thumbcaption");""!==c&&void 0!==c&&(e+='<span class="'+r+'caption">'+c+"</span>")}s.controlNavScaffold.append("<li>"+e+"</li>"),a++}s.controlsContainer?t(s.controlsContainer).append(s.controlNavScaffold):s.append(s.controlNavScaffold),g.controlNav.set(),g.controlNav.active(),s.controlNavScaffold.delegate("a, img",l,function(e){if(e.preventDefault(),""===u||u===e.type){var i=t(this),n=s.controlNav.index(i);i.hasClass(r+"active")||(s.direction=n>s.currentSlide?"next":"prev",s.flexAnimate(n,s.vars.pauseOnAction))}""===u&&(u=e.type),g.setToClearWatchedEvent()})},setupManual:function(){s.controlNav=s.manualControls,g.controlNav.active(),s.controlNav.bind(l,function(e){if(e.preventDefault(),""===u||u===e.type){var i=t(this),n=s.controlNav.index(i);i.hasClass(r+"active")||(n>s.currentSlide?s.direction="next":s.direction="prev",s.flexAnimate(n,s.vars.pauseOnAction));
}""===u&&(u=e.type),g.setToClearWatchedEvent()})},set:function(){var e="thumbnails"===s.vars.controlNav?"img":"a";s.controlNav=t("."+r+"control-nav li "+e,s.controlsContainer?s.controlsContainer:s)},active:function(){s.controlNav.removeClass(r+"active").eq(s.animatingTo).addClass(r+"active")},update:function(e,i){s.pagingCount>1&&"add"===e?s.controlNavScaffold.append(t('<li><a href="#">'+s.count+"</a></li>")):1===s.pagingCount?s.controlNavScaffold.find("li").remove():s.controlNav.eq(i).closest("li").remove(),g.controlNav.set(),s.pagingCount>1&&s.pagingCount!==s.controlNav.length?s.update(i,e):g.controlNav.active()}},directionNav:{setup:function(){var e=t('<ul class="'+r+'direction-nav"><li class="'+r+'nav-prev"><a class="'+r+'prev" href="#">'+s.vars.prevText+'</a></li><li class="'+r+'nav-next"><a class="'+r+'next" href="#">'+s.vars.nextText+"</a></li></ul>");s.customDirectionNav?s.directionNav=s.customDirectionNav:s.controlsContainer?(t(s.controlsContainer).append(e),s.directionNav=t("."+r+"direction-nav li a",s.controlsContainer)):(s.append(e),s.directionNav=t("."+r+"direction-nav li a",s)),g.directionNav.update(),s.directionNav.bind(l,function(e){e.preventDefault();var i;t(this).hasClass(r+"disabled")||""!==u&&u!==e.type||(i=t(this).hasClass(r+"next")?s.getTarget("next"):s.getTarget("prev"),s.flexAnimate(i,s.vars.pauseOnAction)),""===u&&(u=e.type),g.setToClearWatchedEvent()})},update:function(){var e=r+"disabled";1===s.pagingCount?s.directionNav.addClass(e).attr("tabindex","-1"):s.vars.animationLoop?s.directionNav.removeClass(e).removeAttr("tabindex"):0===s.animatingTo?s.directionNav.removeClass(e).filter("."+r+"prev").addClass(e).attr("tabindex","-1"):s.animatingTo===s.last?s.directionNav.removeClass(e).filter("."+r+"next").addClass(e).attr("tabindex","-1"):s.directionNav.removeClass(e).removeAttr("tabindex")}},pausePlay:{setup:function(){var e=t('<div class="'+r+'pauseplay"><a href="#"></a></div>');s.controlsContainer?(s.controlsContainer.append(e),s.pausePlay=t("."+r+"pauseplay a",s.controlsContainer)):(s.append(e),s.pausePlay=t("."+r+"pauseplay a",s)),g.pausePlay.update(s.vars.slideshow?r+"pause":r+"play"),s.pausePlay.bind(l,function(e){e.preventDefault(),""!==u&&u!==e.type||(t(this).hasClass(r+"pause")?(s.manualPause=!0,s.manualPlay=!1,s.pause()):(s.manualPause=!1,s.manualPlay=!0,s.play())),""===u&&(u=e.type),g.setToClearWatchedEvent()})},update:function(e){"play"===e?s.pausePlay.removeClass(r+"pause").addClass(r+"play").html(s.vars.playText):s.pausePlay.removeClass(r+"play").addClass(r+"pause").html(s.vars.pauseText)}},touch:function(){function t(e){e.stopPropagation(),s.animating?e.preventDefault():(s.pause(),n._gesture.addPointer(e.pointerId),x=0,l=p?s.h:s.w,v=Number(new Date),d=h&&m&&s.animatingTo===s.last?0:h&&m?s.limit-(s.itemW+s.vars.itemMargin)*s.move*s.animatingTo:h&&s.currentSlide===s.last?s.limit:h?(s.itemW+s.vars.itemMargin)*s.move*s.currentSlide:m?(s.last-s.currentSlide+s.cloneOffset)*l:(s.currentSlide+s.cloneOffset)*l)}function i(t){t.stopPropagation();var i=t.target._slider;if(i){var a=-t.translationX,s=-t.translationY;return x+=p?s:a,u=x,k=p?Math.abs(x)<Math.abs(-a):Math.abs(x)<Math.abs(-s),t.detail===t.MSGESTURE_FLAG_INERTIA?void e(function(){n._gesture.stop()}):void((!k||Number(new Date)-v>500)&&(t.preventDefault(),!f&&i.transitions&&(i.vars.animationLoop||(u=x/(0===i.currentSlide&&x<0||i.currentSlide===i.last&&x>0?Math.abs(x)/l+2:1)),i.setProps(d+u,"setTouch"))))}}function a(e){e.stopPropagation();var t=e.target._slider;if(t){if(t.animatingTo===t.currentSlide&&!k&&null!==u){var i=m?-u:u,n=i>0?t.getTarget("next"):t.getTarget("prev");t.canAdvance(n)&&(Number(new Date)-v<550&&Math.abs(i)>50||Math.abs(i)>l/2)?t.flexAnimate(n,t.vars.pauseOnAction):f||t.flexAnimate(t.currentSlide,t.vars.pauseOnAction,!0)}o=null,r=null,u=null,d=null,x=0}}var o,r,d,l,u,v,g,y,b,k=!1,w=0,_=0,x=0;c?(n.style.msTouchAction="none",n._gesture=new MSGesture,n._gesture.target=n,n.addEventListener("MSPointerDown",t,!1),n._slider=s,n.addEventListener("MSGestureChange",i,!1),n.addEventListener("MSGestureEnd",a,!1)):(g=function(e){s.animating?e.preventDefault():(window.navigator.msPointerEnabled||1===e.touches.length)&&(s.pause(),l=p?s.h:s.w,v=Number(new Date),w=e.touches[0].pageX,_=e.touches[0].pageY,d=h&&m&&s.animatingTo===s.last?0:h&&m?s.limit-(s.itemW+s.vars.itemMargin)*s.move*s.animatingTo:h&&s.currentSlide===s.last?s.limit:h?(s.itemW+s.vars.itemMargin)*s.move*s.currentSlide:m?(s.last-s.currentSlide+s.cloneOffset)*l:(s.currentSlide+s.cloneOffset)*l,o=p?_:w,r=p?w:_,n.addEventListener("touchmove",y,!1),n.addEventListener("touchend",b,!1))},y=function(e){w=e.touches[0].pageX,_=e.touches[0].pageY,u=p?o-_:o-w,k=p?Math.abs(u)<Math.abs(w-r):Math.abs(u)<Math.abs(_-r);var t=500;(!k||Number(new Date)-v>t)&&(e.preventDefault(),!f&&s.transitions&&(s.vars.animationLoop||(u/=0===s.currentSlide&&u<0||s.currentSlide===s.last&&u>0?Math.abs(u)/l+2:1),s.setProps(d+u,"setTouch")))},b=function(e){if(n.removeEventListener("touchmove",y,!1),s.animatingTo===s.currentSlide&&!k&&null!==u){var t=m?-u:u,i=t>0?s.getTarget("next"):s.getTarget("prev");s.canAdvance(i)&&(Number(new Date)-v<550&&Math.abs(t)>50||Math.abs(t)>l/2)?s.flexAnimate(i,s.vars.pauseOnAction):f||s.flexAnimate(s.currentSlide,s.vars.pauseOnAction,!0)}n.removeEventListener("touchend",b,!1),o=null,r=null,u=null,d=null},n.addEventListener("touchstart",g,!1))},resize:function(){!s.animating&&s.is(":visible")&&(h||s.doMath(),f?g.smoothHeight():h?(s.slides.width(s.computedW),s.update(s.pagingCount),s.setProps()):p?(s.viewport.height(s.h),s.setProps(s.h,"setTotal")):(s.vars.smoothHeight&&g.smoothHeight(),s.newSlides.width(s.computedW),s.setProps(s.computedW,"setTotal")))},smoothHeight:function(e){if(!p||f){var t=f?s:s.viewport;e?t.animate({height:s.slides.eq(s.animatingTo).height()},e):t.height(s.slides.eq(s.animatingTo).height())}},sync:function(e){var i=t(s.vars.sync).data("flexslider"),n=s.animatingTo;switch(e){case"animate":i.flexAnimate(n,s.vars.pauseOnAction,!1,!0);break;case"play":i.playing||i.asNav||i.play();break;case"pause":i.pause()}},uniqueID:function(e){return e.filter("[id]").add(e.find("[id]")).each(function(){var e=t(this);e.attr("id",e.attr("id")+"_clone")}),e},pauseInvisible:{visProp:null,init:function(){var e=g.pauseInvisible.getHiddenProp();if(e){var t=e.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(t,function(){g.pauseInvisible.isHidden()?s.startTimeout?clearTimeout(s.startTimeout):s.pause():s.started?s.play():s.vars.initDelay>0?setTimeout(s.play,s.vars.initDelay):s.play()})}},isHidden:function(){var e=g.pauseInvisible.getHiddenProp();return!!e&&document[e]},getHiddenProp:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(o),o=setTimeout(function(){u=""},3e3)}},s.flexAnimate=function(e,i,n,a,o){if(s.vars.animationLoop||e===s.currentSlide||(s.direction=e>s.currentSlide?"next":"prev"),v&&1===s.pagingCount&&(s.direction=s.currentItem<e?"next":"prev"),!s.animating&&(s.canAdvance(e,o)||n)&&s.is(":visible")){if(v&&a){var c=t(s.vars.asNavFor).data("flexslider");if(s.atEnd=0===e||e===s.count-1,c.flexAnimate(e,!0,!1,!0,o),s.direction=s.currentItem<e?"next":"prev",c.direction=s.direction,Math.ceil((e+1)/s.visible)-1===s.currentSlide||0===e)return s.currentItem=e,s.slides.removeClass(r+"active-slide").eq(e).addClass(r+"active-slide"),!1;s.currentItem=e,s.slides.removeClass(r+"active-slide").eq(e).addClass(r+"active-slide"),e=Math.floor(e/s.visible)}if(s.animating=!0,s.animatingTo=e,i&&s.pause(),s.vars.before(s),s.syncExists&&!o&&g.sync("animate"),s.vars.controlNav&&g.controlNav.active(),h||s.slides.removeClass(r+"active-slide").eq(e).addClass(r+"active-slide"),s.atEnd=0===e||e===s.last,s.vars.directionNav&&g.directionNav.update(),e===s.last&&(s.vars.end(s),s.vars.animationLoop||s.pause()),f)d?(s.slides.eq(s.currentSlide).css({opacity:0,zIndex:1}),s.slides.eq(e).css({opacity:1,zIndex:2}),s.wrapup(b)):(s.slides.eq(s.currentSlide).css({zIndex:1}).animate({opacity:0},s.vars.animationSpeed,s.vars.easing),s.slides.eq(e).css({zIndex:2}).animate({opacity:1},s.vars.animationSpeed,s.vars.easing,s.wrapup));else{var l,u,y,b=p?s.slides.filter(":first").height():s.computedW;h?(l=s.vars.itemMargin,y=(s.itemW+l)*s.move*s.animatingTo,u=y>s.limit&&1!==s.visible?s.limit:y):u=0===s.currentSlide&&e===s.count-1&&s.vars.animationLoop&&"next"!==s.direction?m?(s.count+s.cloneOffset)*b:0:s.currentSlide===s.last&&0===e&&s.vars.animationLoop&&"prev"!==s.direction?m?0:(s.count+1)*b:m?(s.count-1-e+s.cloneOffset)*b:(e+s.cloneOffset)*b,s.setProps(u,"",s.vars.animationSpeed),s.transitions?(s.vars.animationLoop&&s.atEnd||(s.animating=!1,s.currentSlide=s.animatingTo),s.container.unbind("webkitTransitionEnd transitionend"),s.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(s.ensureAnimationEnd),s.wrapup(b)}),clearTimeout(s.ensureAnimationEnd),s.ensureAnimationEnd=setTimeout(function(){s.wrapup(b)},s.vars.animationSpeed+100)):s.container.animate(s.args,s.vars.animationSpeed,s.vars.easing,function(){s.wrapup(b)})}s.vars.smoothHeight&&g.smoothHeight(s.vars.animationSpeed)}},s.wrapup=function(e){f||h||(0===s.currentSlide&&s.animatingTo===s.last&&s.vars.animationLoop?s.setProps(e,"jumpEnd"):s.currentSlide===s.last&&0===s.animatingTo&&s.vars.animationLoop&&s.setProps(e,"jumpStart")),s.animating=!1,s.currentSlide=s.animatingTo,s.vars.after(s)},s.animateSlides=function(){!s.animating&&i&&s.flexAnimate(s.getTarget("next"))},s.pause=function(){clearInterval(s.animatedSlides),s.animatedSlides=null,s.playing=!1,s.vars.pausePlay&&g.pausePlay.update("play"),s.syncExists&&g.sync("pause")},s.play=function(){s.playing&&clearInterval(s.animatedSlides),s.animatedSlides=s.animatedSlides||setInterval(s.animateSlides,s.vars.slideshowSpeed),s.started=s.playing=!0,s.vars.pausePlay&&g.pausePlay.update("pause"),s.syncExists&&g.sync("play")},s.stop=function(){s.pause(),s.stopped=!0},s.canAdvance=function(e,t){var i=v?s.pagingCount-1:s.last;return!!t||(!(!v||s.currentItem!==s.count-1||0!==e||"prev"!==s.direction)||(!v||0!==s.currentItem||e!==s.pagingCount-1||"next"===s.direction)&&(!(e===s.currentSlide&&!v)&&(!!s.vars.animationLoop||(!s.atEnd||0!==s.currentSlide||e!==i||"next"===s.direction)&&(!s.atEnd||s.currentSlide!==i||0!==e||"next"!==s.direction))))},s.getTarget=function(e){return s.direction=e,"next"===e?s.currentSlide===s.last?0:s.currentSlide+1:0===s.currentSlide?s.last:s.currentSlide-1},s.setProps=function(e,t,i){var n=function(){var i=e?e:(s.itemW+s.vars.itemMargin)*s.move*s.animatingTo,n=function(){if(h)return"setTouch"===t?e:m&&s.animatingTo===s.last?0:m?s.limit-(s.itemW+s.vars.itemMargin)*s.move*s.animatingTo:s.animatingTo===s.last?s.limit:i;switch(t){case"setTotal":return m?(s.count-1-s.currentSlide+s.cloneOffset)*e:(s.currentSlide+s.cloneOffset)*e;case"setTouch":return m?e:e;case"jumpEnd":return m?e:s.count*e;case"jumpStart":return m?s.count*e:e;default:return e}}();return n*-1+"px"}();s.transitions&&(n=p?"translate3d(0,"+n+",0)":"translate3d("+n+",0,0)",i=void 0!==i?i/1e3+"s":"0s",s.container.css("-"+s.pfx+"-transition-duration",i),s.container.css("transition-duration",i)),s.args[s.prop]=n,(s.transitions||void 0===i)&&s.container.css(s.args),s.container.css("transform",n)},s.setup=function(e){if(f)s.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===e&&(d?s.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+s.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(s.currentSlide).css({opacity:1,zIndex:2}):0==s.vars.fadeFirstSlide?s.slides.css({opacity:0,display:"block",zIndex:1}).eq(s.currentSlide).css({zIndex:2}).css({opacity:1}):s.slides.css({opacity:0,display:"block",zIndex:1}).eq(s.currentSlide).css({zIndex:2}).animate({opacity:1},s.vars.animationSpeed,s.vars.easing)),s.vars.smoothHeight&&g.smoothHeight();else{var i,n;"init"===e&&(s.viewport=t('<div class="'+r+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(s).append(s.container),s.cloneCount=0,s.cloneOffset=0,m&&(n=t.makeArray(s.slides).reverse(),s.slides=t(n),s.container.empty().append(s.slides))),s.vars.animationLoop&&!h&&(s.cloneCount=2,s.cloneOffset=1,"init"!==e&&s.container.find(".clone").remove(),s.container.append(g.uniqueID(s.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(g.uniqueID(s.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),s.newSlides=t(s.vars.selector,s),i=m?s.count-1-s.currentSlide+s.cloneOffset:s.currentSlide+s.cloneOffset,p&&!h?(s.container.height(200*(s.count+s.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){s.newSlides.css({display:"block"}),s.doMath(),s.viewport.height(s.h),s.setProps(i*s.h,"init")},"init"===e?100:0)):(s.container.width(200*(s.count+s.cloneCount)+"%"),s.setProps(i*s.computedW,"init"),setTimeout(function(){s.doMath(),s.newSlides.css({width:s.computedW,marginRight:s.computedM,"float":"left",display:"block"}),s.vars.smoothHeight&&g.smoothHeight()},"init"===e?100:0))}h||s.slides.removeClass(r+"active-slide").eq(s.currentSlide).addClass(r+"active-slide"),s.vars.init(s)},s.doMath=function(){var e=s.slides.first(),t=s.vars.itemMargin,i=s.vars.minItems,n=s.vars.maxItems;s.w=void 0===s.viewport?s.width():s.viewport.width(),s.h=e.height(),s.boxPadding=e.outerWidth()-e.width(),h?(s.itemT=s.vars.itemWidth+t,s.itemM=t,s.minW=i?i*s.itemT:s.w,s.maxW=n?n*s.itemT-t:s.w,s.itemW=s.minW>s.w?(s.w-t*(i-1))/i:s.maxW<s.w?(s.w-t*(n-1))/n:s.vars.itemWidth>s.w?s.w:s.vars.itemWidth,s.visible=Math.floor(s.w/s.itemW),s.move=s.vars.move>0&&s.vars.move<s.visible?s.vars.move:s.visible,s.pagingCount=Math.ceil((s.count-s.visible)/s.move+1),s.last=s.pagingCount-1,s.limit=1===s.pagingCount?0:s.vars.itemWidth>s.w?s.itemW*(s.count-1)+t*(s.count-1):(s.itemW+t)*s.count-s.w-t):(s.itemW=s.w,s.itemM=t,s.pagingCount=s.count,s.last=s.count-1),s.computedW=s.itemW-s.boxPadding,s.computedM=s.itemM},s.update=function(e,t){s.doMath(),h||(e<s.currentSlide?s.currentSlide+=1:e<=s.currentSlide&&0!==e&&(s.currentSlide-=1),s.animatingTo=s.currentSlide),s.vars.controlNav&&!s.manualControls&&("add"===t&&!h||s.pagingCount>s.controlNav.length?g.controlNav.update("add"):("remove"===t&&!h||s.pagingCount<s.controlNav.length)&&(h&&s.currentSlide>s.last&&(s.currentSlide-=1,s.animatingTo-=1),g.controlNav.update("remove",s.last))),s.vars.directionNav&&g.directionNav.update()},s.addSlide=function(e,i){var n=t(e);s.count+=1,s.last=s.count-1,p&&m?void 0!==i?s.slides.eq(s.count-i).after(n):s.container.prepend(n):void 0!==i?s.slides.eq(i).before(n):s.container.append(n),s.update(i,"add"),s.slides=t(s.vars.selector+":not(.clone)",s),s.setup(),s.vars.added(s)},s.removeSlide=function(e){var i=isNaN(e)?s.slides.index(t(e)):e;s.count-=1,s.last=s.count-1,isNaN(e)?t(e,s.slides).remove():p&&m?s.slides.eq(s.last).remove():s.slides.eq(e).remove(),s.doMath(),s.update(i,"remove"),s.slides=t(s.vars.selector+":not(.clone)",s),s.setup(),s.vars.removed(s)},g.init()},t(window).blur(function(e){i=!1}).focus(function(e){i=!0}),t.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",customDirectionNav:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},t.fn.flexslider=function(e){if(void 0===e&&(e={}),"object"==typeof e)return this.each(function(){var i=t(this),n=e.selector?e.selector:".slides > li",a=i.find(n);1===a.length&&e.allowOneSlide===!0||0===a.length?(a.fadeIn(400),e.start&&e.start(i)):void 0===i.data("flexslider")&&new t.flexslider(this,e)});var i=t(this).data("flexslider");switch(e){case"play":i.play();break;case"pause":i.pause();break;case"stop":i.stop();break;case"next":i.flexAnimate(i.getTarget("next"),!0);break;case"prev":case"previous":i.flexAnimate(i.getTarget("prev"),!0);break;default:"number"==typeof e&&i.flexAnimate(e,!0)}}}(t)}).call(t,i(60).setImmediate)},function(e,t,i){(function(e){function n(e,t){this._id=e,this._clearFn=t}var a="undefined"!=typeof e&&e||"undefined"!=typeof self&&self||window,s=Function.prototype.apply;t.setTimeout=function(){return new n(s.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new n(s.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i(61),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,function(){return this}())},function(e,t,i){(function(e,t){!function(e,i){"use strict";function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return f[h]=n,m(h),h++}function a(e){delete f[e]}function s(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(i,n)}}function o(e){if(v)setTimeout(o,0,e);else{var t=f[e];if(t){v=!0;try{s(t)}finally{a(e),v=!1}}}}function r(){m=function(e){t.nextTick(function(){o(e)})}}function c(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}function d(){var t="setImmediate$"+Math.random()+"$",i=function(i){i.source===e&&"string"==typeof i.data&&0===i.data.indexOf(t)&&o(+i.data.slice(t.length))};e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),m=function(i){e.postMessage(t+i,"*")}}function l(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;o(t)},m=function(t){e.port2.postMessage(t)}}function u(){var e=g.documentElement;m=function(t){var i=g.createElement("script");i.onreadystatechange=function(){o(t),i.onreadystatechange=null,e.removeChild(i),i=null},e.appendChild(i)}}function p(){m=function(e){setTimeout(o,0,e)}}if(!e.setImmediate){var m,h=1,f={},v=!1,g=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?r():c()?d():e.MessageChannel?l():g&&"onreadystatechange"in g.createElement("script")?u():p(),y.setImmediate=n,y.clearImmediate=a}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),i(62))},function(e,t){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function a(e){if(l===setTimeout)return setTimeout(e,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function s(e){if(u===clearTimeout)return clearTimeout(e);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function o(){f&&m&&(f=!1,m.length?h=m.concat(h):v=-1,h.length&&r())}function r(){if(!f){var e=a(o);f=!0;for(var t=h.length;t;){for(m=h,h=[];++v<t;)m&&m[v].run();v=-1,t=h.length}m=null,f=!1,s(e)}}function c(e,t){this.fun=e,this.array=t}function d(){}var l,u,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:i}catch(e){l=i}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(e){u=n}}();var m,h=[],f=!1,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new c(e,t)),1!==h.length||f||a(r)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=d,p.addListener=d,p.once=d,p.off=d,p.removeListener=d,p.removeAllListeners=d,p.emit=d,p.prependListener=d,p.prependOnceListener=d,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},,function(e,t,i){var n,a,s;!function(o){a=[i(13)],n=o,s="function"==typeof n?n.apply(t,a):n,!(void 0!==s&&(e.exports=s))}(function(e){function t(t,n){this.$con=e(t),this.opts=e.extend({},i,n),this.init()}var i={eventype:"click",effect:"none",active:null,afterActive:e.noop,navSelector:".ui-tab-nav",contSelector:".ui-tab-content",delay:0};t.prototype={init:function(){var e=this,t=e.opts;e.setup(),e.bindEvent(),null!==t.active&&e.activate(t.active)},setup:function(){var e=this,t=e.$con;e.$tabs=t.find(e.opts.navSelector).children(),e.$panels=t.find(e.opts.contSelector).children()},bindEvent:function(){var t,i=this;i.$tabs.on(i.opts.eventype,function(n,a){n.preventDefault();var s=e(this),o=s.index();s.hasClass("current")||(t&&clearTimeout(t),t=setTimeout(function(){i.activate(o,a)},i.opts.delay))}),i.opts.delay&&i.$tabs.on("mouseleave",function(){clearTimeout(t)})},activate:function(e,t){var i=this,n=i.opts,a={none:function(){i.$panels.hide().eq(e).show()},fade:function(){i.$panels.hide().eq(e).fadeIn()}};a[i.opts.effect](),i.$tabs.eq(e).addClass("current").siblings().removeClass("current"),i.$panels.eq(e).addClass("current").siblings().removeClass("current"),n.afterActive(i.$tabs.eq(e),e,t)}},e.fn.vtab=function(i){return this.each(function(){var n=e(this),a=n.data("vtab");a||n.data("vtab",a=new t(this,i)),"string"==typeof i&&a[i]()})}})},function(e,t,i){var n=i(13);!function(e,t,i,n){var a=e(t);e.fn.lazyload=function(s){function o(){var t=0;c.each(function(){var i=e(this);if(!d.skip_invisible||i.is(":visible"))if(e.abovethetop(this,d)||e.leftofbegin(this,d));else if(e.belowthefold(this,d)||e.rightoffold(this,d)){if(++t>d.failure_limit)return!1}else i.trigger("appear"),t=0})}var r,c=this,d={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(n!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),n!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),e.extend(d,s)),r=d.container===n||d.container===t?a:e(d.container),0===d.event.indexOf("scroll")&&r.bind(d.event,function(){return o()}),this.each(function(){var t=this,i=e(t);t.loaded=!1,i.attr("src")!==n&&i.attr("src")!==!1||i.is("img")&&i.attr("src",d.placeholder),i.one("appear",function(){if(!this.loaded){if(d.appear){var n=c.length;d.appear.call(t,n,d)}e("<img />").bind("load",function(){var n=i.attr("data-"+d.data_attribute);i.hide(),i.is("img")?i.attr("src",n):i.css("background-image","url('"+n+"')"),i[d.effect](d.effect_speed),t.loaded=!0;var a=e.grep(c,function(e){return!e.loaded});if(c=e(a),d.load){var s=c.length;d.load.call(t,s,d)}}).attr("src",i.attr("data-"+d.data_attribute))}}),0!==d.event.indexOf("scroll")&&i.bind(d.event,function(){t.loaded||i.trigger("appear")})}),a.bind("resize",function(){o()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&a.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&c.each(function(){e(this).trigger("appear")})}),e(i).ready(function(){o()}),this},e.belowthefold=function(i,s){var o;return o=s.container===n||s.container===t?(t.innerHeight?t.innerHeight:a.height())+a.scrollTop():e(s.container).offset().top+e(s.container).height(),o<=e(i).offset().top-s.threshold},e.rightoffold=function(i,s){var o;return o=s.container===n||s.container===t?a.width()+a.scrollLeft():e(s.container).offset().left+e(s.container).width(),o<=e(i).offset().left-s.threshold},e.abovethetop=function(i,s){var o;return o=s.container===n||s.container===t?a.scrollTop():e(s.container).offset().top,o>=e(i).offset().top+s.threshold+e(i).height()},e.leftofbegin=function(i,s){var o;return o=s.container===n||s.container===t?a.scrollLeft():e(s.container).offset().left,o>=e(i).offset().left+s.threshold+e(i).width()},e.inviewport=function(t,i){return!(e.rightoffold(t,i)||e.leftofbegin(t,i)||e.belowthefold(t,i)||e.abovethetop(t,i))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(n,window,document)},function(e,t,i){var n,a,s;!function(o){a=[i(13)],n=o,s="function"==typeof n?n.apply(t,a):n,!(void 0!==s&&(e.exports=s))}(function(e){var t={min:0,max:0,buffer:0,container:window,fixClass:"fixed",onEnter:null,onLeave:null};return ScrollFix=function(i,n){this.$elem=e(i),this.opts=e.extend({},t,n),this.init()},ScrollFix.prototype={constructor:ScrollFix,init:function(){var t=this,i=t.opts;"string"==typeof i.max&&(i.max=e(i.max)),"string"==typeof i.min&&(i.min=e(i.min)),t.bindEvent()},bindEvent:function(){var t,i=this,n=i.opts,a=i.$elem,s=e(n.container),o=e(document),r=n.max,c=n.min,d=!1,l=0,u=0;s.on("scroll.scrollfix",function(){t=s.scrollTop()+n.buffer,r.length&&(l=r.offset().top),c.length&&(u=c.offset().top),0===u&&(u=a.offset().top),l=o.height(),t>=u&&t<=l?d||(d=!0,a.addClass(n.fixClass),e.isFunction(n.onEnter)&&n.onEnter(a[0],t)):d&&(d=!1,a.removeClass(n.fixClass),e.isFunction(n.onLeave)&&n.onLeave(a[0],t))})},destroy:function(){this.$elem.removeData("scrollfix"),this.opts.container.off("scroll.scrollfix")}},e.fn.scrollfix=function(t){return this.each(function(){var i=e(this),n=(i.data("scrollfix"),"object"==typeof t&&t);new ScrollFix(this,n)})},ScrollFix})},function(e,t,i){var n,a,s;!function(o){a=[i(13)],n=o,s="function"==typeof n?n.apply(t,a):n,!(void 0!==s&&(e.exports=s))}(function(e){e.extend(e.easing,{easeOutCubic:function(e,t,i,n,a){return n*((t=t/a-1)*t*t+1)+i}});var t={speed:0,smartShow:!0,smartHeight:200,scrollTo:0,container:null},i=function(i){this.opts=e.extend({},t,i),this.init()};return i.prototype={init:function(){var t=this,i=t.opts;t.$container=e(i.container?container:document),t.$conBody=t.render(),t.opts.smartShow&&t.autoShow(),t.bindEvent()},bindEvent:function(){var e=this;e.$conBody.on("click",".gotop-arrow",function(){e.goTop()})},goTop:function(){var t=this,i=t.opts,n=i.speed,a=i.scrollTo;e.isNumeric(n)?e("html,body").animate({scrollTop:a},n,"easeOutCubic"):"string"==typeof a&&t.$container.scrollTop(e(i.scrollTo).offset().top)},autoShow:function(){var t,i=this,n=i.$container,a=i.$conBody,s=n.width(),o=this.opts.smartHeight;s<1240&&e("siteGotop").css({left:"initial",right:10,marginLeft:0}),n.scrollTop()>o&&a.fadeIn(300),n.on("scroll",function(){i.timer&&(clearTimeout(i.timer),t=null),i.timer=setTimeout(function(){n.scrollTop()>o?a.fadeIn():a.fadeOut("fast")},100)})},render:function(){var t='<div class="site-gotop" id="siteGotop"><a class="gotop-suggest" title="建议反馈" data-bh="click_store_de_advice" href="//me.meizu.com/member/advice/index" target="_blank"></a><div class="gotop-arrow" title="回到顶部" data-bh="click_store_de_top"></div></div>';return e(t).appendTo("body")},createStyle:function(e){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)},destroy:function(){this.$container.off("scroll.scrollfix")}},i})},function(e,t){function i(){if(location.search){var e=location.search.split("&").filter(function(e){return e.indexOf(n)>-1})[0];if(e){var t=encodeURIComponent(e.split("=")[1]);if(!t||"undefined"==t)return;var i="mkid="+t+";path=/;domain=meizu.com";document.cookie=i}}}var n="mkid";e.exports={check:i}},function(e,t,i){var n=i(13),a=i(27),s={erp:"//ordercenter.meizu.com/xiaoneng/erp/param"},o=window.MZ.modelData,r=function(e){var t,i=0;if(0==e.length)return i;for(var n=0;n<e.length;n++)t=e.charCodeAt(n),i=(i<<5)-i+t,i&=i;return"游客"+(i+"").slice(-5)||"游客"};e.exports=function(){var e=window.NTKF_PARAM;o.showXiaoNeng&&n("#J_kefu").show().on("click",function(t){t.preventDefault(),a.ajax(s.erp,{supplier_id:o.merchantId}).done(function(t){e.erpparam=t.erpparam,e.uid=t.uid,e.uname=t.uname,t.tjcoid&&(e.uid=t.tjcoid),t.uname||(e.uname=r(t.tjcoid))}).always(function(){window.NTKF.im_openInPageChat(o.receptionTeamId||e.settingid)})})}},,,function(e,t,i){i(73),i(66);var n=i(13);n("#J_fastNav").scrollfix({max:".layout-footer",fixClass:"--fixed"}),n(function(){var e=n("#layoutTopbar").height(),t=n("#layoutHeader").height();setTimeout(function(){n("html,body").animate({scrollTop:e+t},300)},500)})},15,15,function(e,t,i){i(76)},15,function(e,t,i){i(78),i(59);var n=i(23),a=i(13),s=a("#detailRecommend"),o=n.template(i(79)),r=window.MZ.modelData,c=function(){r.showItemRecommend&&a.ajax({url:"//detail.meizu.com/api/item/recommends",type:"get",data:{itemId:r.itemId},dataType:"jsonp",jsonp:"callback"}).done(function(e){e.success&&e.data&&(e.data.forEach(function(e,t){e.bh="click_store_xgtj_kw_"+parseInt(t/5+1,10)+"_"+(t%5+1),e.mtype="click_store_xgtj_kw_"+parseInt(t/5+1,10)+"_"+(t%5+1)}),a(o(e)).appendTo(s),d())}).fail(function(){})},d=function(){a("#J_detailRecommendSlider").flexslider({animation:"slide",selector:".detail-recommend-slider-wrap > .detail-rs-item",customDirectionNav:a("#recommendNav a"),animationLoop:!1,slideshow:!1,itemWidth:240,itemMargin:10,minItems:1,maxItems:5,controlNav:!1})};e.exports={init:c}},15,function(e,t){e.exports='\n<div class="detail-recommend-hd container">\n  <h2 class="mod-title">为您推荐</h2>\n  <div class="mod-control" id="recommendNav">\n    <a class="vm-prev flex-prev iconfont" id="J_recommendPrev" data-mtype="click_store_xgtj_fy_left" data-bh="click_store_xgtj_fy_left" href="<%= _.formatUrl(\'#\', { click: \'store_xgtj_fy_left\' }) %>">\n    </a>\n    <a class="vm-next flex-next iconfont" id="J_recommendNext" data-mtype="click_store_xgtj_fy_right" data-bh="click_store_xgtj_fy_right" href="<%= _.formatUrl(\'#\', { click: \'store_xgtj_fy_right\' }) %>">\n    </a>\n  </div>\n</div>\n<div class="detail-recommend-slider container lazyload" id="J_detailRecommendSlider">\n  <ul class="detail-recommend-slider-wrap">\n    <% _.each(data, function (data, index) { %>\n    <li class="detail-rs-item">\n      <a class="detail-rs-item-wrap" title="<%= data.name %>" href="<%= _.formatUrl(data.itemUrl, { click: data.mtype }) %>" target="_blank" data-mtype="click_<%= data.mtype %>" data-bh="click_<%= data.mtype %>">\n        <div class="mod-pic">\n          <img class="lazy" src="<%= data.imgUrl %>" width="180" height="180">\n        </div>\n\n        <div class="mod-desc">\n          <h4 class="vm-title"><%= data.name %></h4>\n          <h6 class="vm-subtitle<%= data.titleColor === 1 ? \' \' : \' vm-subtitle-red\' %> " title="<%= data.title %>"><%=\n            data.title %></h6>\n          <p class="vm-price">\n            <% if (data.discountFlag) { %>\n              <span class="vm-price-flag">限时特惠</span>\n              <span>¥</span>\n              <span class="vm-price-text"><%= data.discountPrice %></span>\n              <% if (data.discountPrice !== data.maxPrice) {%>\n                <span style="display: none;" class="vm-price-qi">起</span>\n              <% } %>\n            <% } %>\n            <% if (!data.discountFlag) { %>\n              <span>¥</span>\n              <span class="vm-price-text"><%= data.minPrice %></span>\n              <% if (data.minPrice !== data.maxPrice) {%>\n                <span style="display: none;" class="vm-price-qi">起</span>\n              <% } %>\n            <% } %>\n          </p>\n        </div>\n      </a>\n    </li>\n    <% }) %>\n  </ul>\n</div>\n';
}]));